{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Welcome to Personal Manager 02","text":"<p>Personal Manager 02 is a powerful project management platform with a comprehensive public SDK and OAuth2-secured API that enables developers to build custom widgets, automation, and integrations.</p>"},{"location":"#what-is-personal-manager-02","title":"What is Personal Manager 02?","text":"<p>Personal Manager 02 is a comprehensive solution for managing your tasks, events, projects, and more. It provides a flexible API that allows you to integrate it with your existing workflows and build custom applications on top of it.</p> <p>The project is built with a modern tech stack, including FastAPI for the backend API, and is designed to be extensible and easy to use.</p>"},{"location":"#key-features","title":"Key Features","text":""},{"location":"#oauth2-authentication","title":"\ud83d\udd10 OAuth2 Authentication","text":"<ul> <li>Secure token-based authentication with refresh tokens</li> <li>Granular permission scopes (read, write, delete, admin)</li> <li>Access tokens (1 hour) and refresh tokens (30 days)</li> <li>API key support for developers</li> </ul>"},{"location":"#public-python-sdk","title":"\ud83d\udce6 Public Python SDK","text":"<ul> <li>Simple, Pythonic interface for widget management</li> <li>Automatic authentication handling</li> <li>Type hints and IDE support</li> <li>Install with: <code>pip install Lazi-sdk</code></li> </ul>"},{"location":"#custom-widgets","title":"\ud83c\udfa8 Custom Widgets","text":"<ul> <li>Create custom widgets with your own logic</li> <li>Dynamic endpoint registration</li> <li>Attach media files (images, videos, documents)</li> <li>Real-time data refresh intervals</li> <li>User-defined parameters and headers</li> </ul>"},{"location":"#extensibility","title":"\ud83d\udd27 Extensibility","text":"<ul> <li>Create custom API endpoints for widgets</li> <li>Execute user-defined Python code securely</li> <li>Build automation workflows</li> <li>Integrate with external APIs</li> </ul>"},{"location":"#project-management","title":"\ud83d\udcca Project Management","text":"<ul> <li>Organize work into projects</li> <li>Manage team members and permissions</li> <li>Track progress and metrics</li> <li>Collaborate through discussions</li> </ul>"},{"location":"#cloud-storage","title":"\u2601\ufe0f Cloud Storage","text":"<ul> <li>AWS S3 integration for media files</li> <li>Presigned URLs for secure access</li> <li>Support for images, videos, PDFs, and more</li> </ul>"},{"location":"#quick-start","title":"Quick Start","text":""},{"location":"#installation","title":"Installation","text":"<pre><code>pip install Lazi-sdk\n</code></pre>"},{"location":"#basic-usage","title":"Basic Usage","text":"<pre><code>from lazi_sdk import WriteWidget\n\n# Initialize with OAuth token\nwidget = WriteWidget(\n    token=\"your_oauth_token\",\n    user_id=\"user_12345\"\n)\n\n# Create a widget\nawait widget.create_new(\n    name=\"Analytics Dashboard\",\n    description=\"Real-time sales metrics\",\n    size=\"large\",\n    project_id=\"project_001\"\n)\n\n# Save to project\nawait widget.save()\n</code></pre>"},{"location":"#documentation-sections","title":"Documentation Sections","text":"<ul> <li>Getting Started - Step-by-step tutorial for new users</li> <li>SDK Guide - Complete Python SDK documentation</li> <li>API Reference - Detailed API endpoint documentation</li> <li>Advanced Topics - OAuth2 scopes, custom endpoints, security</li> </ul>"},{"location":"#authentication-flow","title":"Authentication Flow","text":"<ol> <li>Register your application to get API credentials</li> <li>Authenticate users with OAuth2 to get access tokens</li> <li>Make API calls using the access token</li> <li>Refresh tokens automatically when they expire (30 days)</li> </ol>"},{"location":"#use-cases","title":"Use Cases","text":"<ul> <li>\ud83d\udcc8 Build custom dashboards with real-time data</li> <li>\ud83e\udd16 Create automation workflows for project management</li> <li>\ud83d\udd17 Integrate external services (GitHub, Slack, analytics tools)</li> <li>\ud83d\udcf1 Develop mobile apps with widget support</li> <li>\ud83c\udfaf Custom business logic executed on your infrastructure</li> </ul>"},{"location":"#getting-started","title":"Getting Started","text":"<p>To get started with the Personal Manager 02 API, check out the Tutorial for a step-by-step guide on how to perform basic operations.</p> <p>For SDK usage, see the SDK Installation Guide.</p> <p>For a detailed description of all the available API endpoints, please refer to the API Reference.</p>"},{"location":"#contributing","title":"Contributing","text":"<p>This project is open source and we welcome contributions from the community. If you would like to contribute, please check out the GitHub repository.</p>"},{"location":"#support","title":"Support","text":"<ul> <li>\ud83d\udcd6 Documentation</li> <li>\ud83d\udcac GitHub Discussions</li> <li>\ud83d\udc1b Issue Tracker</li> </ul>"},{"location":"api/","title":"API Reference","text":"<p>This API documentation provides details on the available endpoints for the Personal Manager 02 application.</p>"},{"location":"api/#authentication","title":"Authentication","text":"<p>The authentication endpoints handle user signup, login, and other authentication-related operations.</p>"},{"location":"api/#signup","title":"Signup","text":"<ul> <li>Endpoint: <code>GET /auth/signup</code></li> <li>Method: <code>GET</code></li> <li>Description: Signs up a new user.</li> <li>Query Parameters:<ul> <li><code>username</code> (str, required): The username for the new user.</li> <li><code>email</code> (str, required): The email address for the new user.</li> <li><code>password</code> (str, required): The password for the new user.</li> <li><code>project_id</code> (str, optional): A project ID to associate with the user.</li> <li><code>org_id</code> (str, optional): An organization ID to associate with the user.</li> </ul> </li> <li>Sample Request: <code>GET /auth/signup?username=testuser&amp;email=test@example.com&amp;password=password</code></li> <li>Success Response: <code>json     {       \"status\": \"success\",       \"user_id\": \"some-uuid\"     }</code></li> </ul>"},{"location":"api/#login","title":"Login","text":"<ul> <li>Endpoint: <code>GET /auth/login</code></li> <li>Method: <code>GET</code></li> <li>Description: Logs in an existing user.</li> <li>Query Parameters:<ul> <li><code>username</code> (str, required): The username of the user.</li> <li><code>password</code> (str, required): The password of the user.</li> </ul> </li> <li>Sample Request: <code>GET /auth/login?username=testuser&amp;password=password</code></li> <li>Success Response: <code>json     {       \"status\": \"success\",       \"user_id\": \"some-uuid\"     }</code></li> </ul>"},{"location":"api/#set-icloud-user","title":"Set iCloud User","text":"<ul> <li>Endpoint: <code>POST /auth/set_icloud_user</code></li> <li>Method: <code>POST</code></li> <li>Description: Sets the iCloud credentials for a user.</li> <li>Request Body: <code>json     {       \"service_name\": \"user_auth\",       \"apple_user\": \"apple_username\",       \"apple_pass\": \"apple_password\"     }</code></li> </ul>"},{"location":"api/#remove-user","title":"Remove User","text":"<ul> <li>Endpoint: <code>POST /auth/remove_user</code></li> <li>Method: <code>POST</code></li> <li>Description: Removes a user from the system.</li> <li>Request Body: <code>json     {       \"user_id\": \"some-uuid\"     }</code></li> </ul>"},{"location":"api/#google-authentication","title":"Google Authentication","text":"<ul> <li>Endpoint: <code>GET /auth/google</code></li> <li>Method: <code>GET</code></li> <li>Description: Initiates the Google OAuth2 flow and returns an authorization URL.</li> <li>Query Parameters:<ul> <li><code>user_id</code> (str, required): The ID of the user.</li> </ul> </li> </ul>"},{"location":"api/#complete-google-authentication","title":"Complete Google Authentication","text":"<ul> <li>Endpoint: <code>POST /auth/google/complete</code></li> <li>Method: <code>POST</code></li> <li>Description: Completes the Google OAuth2 flow with the authorization code.</li> <li>Request Body: <code>json     {       \"user_id\": \"some-uuid\",       \"authorization_code\": \"some-auth-code\"     }</code></li> </ul>"},{"location":"api/#coordination","title":"Coordination","text":"<p>Endpoints for coordinating between users.</p>"},{"location":"api/#fetch-users","title":"Fetch Users","text":"<ul> <li>Endpoint: <code>POST /coordinate/fetch_users</code></li> <li>Method: <code>POST</code></li> <li>Description: Fetches user data.</li> <li>Request Body: <code>json     {       \"members\": [         {\"email\": \"user1@example.com\"},         {\"email\": \"user2@example.com\"}       ]     }</code></li> </ul>"},{"location":"api/#get-availability","title":"Get Availability","text":"<ul> <li>Endpoint: <code>POST /coordinate/get_availability</code></li> <li>Method: <code>POST</code></li> <li>Description: Gets the availability of users for a specific time range.</li> <li>Request Body: <code>json     {       \"users\": [{\"user_id\": \"user1\", \"username\": \"testuser\"}],       \"request_start\": \"2025-01-01T10:00:00\",       \"request_end\": \"2025-01-01T11:00:00\"     }</code></li> </ul>"},{"location":"api/#discussions","title":"Discussions","text":"<p>Endpoints for managing discussions within projects.</p> <p>Note: Some of these endpoints have incorrect parameter definitions (multiple body parameters). The documentation assumes they will be refactored to have only one body parameter, with other parameters passed as query parameters.</p>"},{"location":"api/#view-discussion","title":"View Discussion","text":"<ul> <li>Endpoint: <code>GET /discussions/view_discussion</code></li> <li>Method: <code>GET</code></li> <li>Description: Fetches an existing discussion.</li> <li>Query Parameters:<ul> <li><code>user_id</code> (str, required)</li> <li><code>project_id</code> (str, required)</li> <li><code>discussion_id</code> (str, required)</li> <li><code>force_refresh</code> (bool, optional)</li> </ul> </li> </ul>"},{"location":"api/#list-project-discussions","title":"List Project Discussions","text":"<ul> <li>Endpoint: <code>GET /discussions/list_project_discussions</code></li> <li>Method: <code>GET</code></li> <li>Description: Lists all discussions for a project.</li> <li>Query Parameters:<ul> <li><code>user_id</code> (str, required)</li> <li><code>project_id</code> (str, required)</li> <li><code>force_refresh</code> (bool, optional)</li> </ul> </li> </ul>"},{"location":"api/#events","title":"Events","text":"<p>Endpoints for managing events and tasks.</p>"},{"location":"api/#process-input","title":"Process Input","text":"<ul> <li>Endpoint: <code>POST /scheduler/process_input</code></li> <li>Method: <code>POST</code></li> <li>Description: Processes natural language input to create, update, or delete events.</li> <li>Request Body: <code>json     {       \"input_text\": \"Schedule a meeting with John tomorrow at 2pm\",       \"user_id\": \"some-uuid\"     }</code></li> </ul>"},{"location":"api/#delete-event","title":"Delete Event","text":"<ul> <li>Endpoint: <code>POST /scheduler/delete_event/{event_id}</code></li> <li>Method: <code>POST</code></li> <li>Description: Deletes an event.</li> <li>Path Parameters:<ul> <li><code>event_id</code> (str, required)</li> </ul> </li> <li>Request Body: <code>json     {       \"user_id\": \"some-uuid\",       \"event_requested\": { ... }     }</code></li> </ul>"},{"location":"api/#update-event","title":"Update Event","text":"<ul> <li>Endpoint: <code>POST /scheduler/update_event/{event_id}</code></li> <li>Method: <code>POST</code></li> <li>Description: Updates an event.</li> <li>Path Parameters:<ul> <li><code>event_id</code> (str, required)</li> </ul> </li> <li>Request Body: <code>json     {       \"user_id\": \"some-uuid\",       \"event_requested\": { ... }     }</code></li> </ul>"},{"location":"api/#organizations","title":"Organizations","text":"<p>Endpoints for managing organizations.</p> <p>Note: Some of these endpoints have incorrect parameter definitions. The documentation assumes they will be refactored.</p>"},{"location":"api/#create-organization","title":"Create Organization","text":"<ul> <li>Endpoint: <code>POST /organizations/create_org</code></li> <li>Method: <code>POST</code></li> <li>Description: Creates a new organization.</li> <li>Query Parameters:<ul> <li><code>user_id</code> (str, required)</li> </ul> </li> <li>Request Body: <code>json     {       \"name\": \"My Organization\",       \"members\": [\"user1\", \"user2\"],       \"projects\": [\"project1\"]     }</code></li> </ul>"},{"location":"api/#projects","title":"Projects","text":"<p>Endpoints for managing projects.</p> <p>Note: Some of these endpoints have incorrect parameter definitions. The documentation assumes they will be refactored.</p>"},{"location":"api/#view-project","title":"View Project","text":"<ul> <li>Endpoint: <code>GET /projects/view_project</code></li> <li>Method: <code>GET</code></li> <li>Description: Fetches an existing project.</li> <li>Query Parameters:<ul> <li><code>project_id</code> (str, required)</li> <li><code>user_id</code> (str, required)</li> <li><code>project_name</code> (str, required)</li> <li><code>force_refresh</code> (bool, optional)</li> </ul> </li> </ul>"},{"location":"api/#task-list","title":"Task List","text":"<p>Endpoints for managing task lists.</p>"},{"location":"api/#list-events","title":"List Events","text":"<ul> <li>Endpoint: <code>POST /task_list/list_events</code></li> <li>Method: <code>POST</code></li> <li>Description: Lists events for a user.</li> <li>Request Body: <code>json     {       \"calendar_event\": { ... },       \"user_id\": \"some-uuid\",       \"minTime\": \"2025-01-01T00:00:00Z\",       \"maxTime\": \"2025-01-31T23:59:59Z\"     }</code></li> </ul>"},{"location":"tutorial/","title":"Tutorial","text":"<p>This tutorial will guide you through the basic workflow of using the Personal Manager 02 API.</p>"},{"location":"tutorial/#1-sign-up","title":"1. Sign Up","text":"<p>First, you need to create a new user account. You can do this by sending a <code>GET</code> request to the <code>/auth/signup</code> endpoint.</p> <p>Request:</p> <pre><code>GET /auth/signup?username=testuser&amp;email=test@example.com&amp;password=password\n</code></pre> <p>Response:</p> <pre><code>{\n  \"status\": \"success\",\n  \"user_id\": \"your-new-user-id\"\n}\n</code></pre> <p>Save the <code>user_id</code> from the response, as you will need it for the next steps.</p>"},{"location":"tutorial/#2-log-in","title":"2. Log In","text":"<p>Once you have signed up, you can log in to get a session token (although this API does not seem to use session tokens, logging in confirms your credentials).</p> <p>Request:</p> <pre><code>GET /auth/login?username=testuser&amp;password=password\n</code></pre> <p>Response:</p> <pre><code>{\n  \"status\": \"success\",\n  \"user_id\": \"your-user-id\"\n}\n</code></pre>"},{"location":"tutorial/#3-create-a-project","title":"3. Create a Project","text":"<p>Now that you are logged in, you can create a new project.</p> <p>Request: Send a <code>POST</code> request to <code>/projects/create_project</code> with the following body:</p> <pre><code>{\n  \"project_name\": \"My First Project\",\n  \"project_transparency\": true,\n  \"project_likes\": 0,\n  \"project_members\": [[\"testuser\", \"admin\"]],\n  \"user_id\": \"your-user-id\"\n}\n</code></pre> <p>Response:</p> <pre><code>{\n  \"message\": \"Project created successfully.\"\n}\n</code></pre>"},{"location":"tutorial/#4-view-your-project","title":"4. View Your Project","text":"<p>You can view the project you just created by sending a <code>GET</code> request to <code>/projects/view_project</code>.</p> <p>Request:</p> <pre><code>GET /projects/view_project?project_id=the-project-id&amp;user_id=your-user-id&amp;project_name=My%20First%20Project\n</code></pre> <p>Note: You will need the <code>project_id</code> which is not returned by the create endpoint. This is a potential improvement for the API.</p> <p>Response:</p> <pre><code>{\n  \"project\": {\n    \"project_name\": \"My First Project\",\n    ...\n  },\n  \"user_data\": { ... }\n}\n</code></pre> <p>This concludes the basic tutorial. You can now explore the other API endpoints to manage your projects, tasks, and events.</p>"},{"location":"advanced/custom-endpoints/","title":"Custom Endpoints","text":"<p>Guide to creating dynamic, user-defined API endpoints in Lazi.</p>"},{"location":"advanced/custom-endpoints/#overview","title":"Overview","text":"<p>The Lazi API allows users to create custom endpoints for their widgets that execute user-defined Python logic. This enables powerful, flexible widget behaviors while maintaining security through code sandboxing.</p>"},{"location":"advanced/custom-endpoints/#how-it-works","title":"How It Works","text":""},{"location":"advanced/custom-endpoints/#1-user-creates-widget-with-endpoint","title":"1. User Creates Widget with Endpoint","text":"<pre><code>from lazi_sdk import WriteWidget\n\nwidget = WriteWidget(token=\"...\", user_id=\"...\")\n\nawait widget.create_new(\n    name=\"Sales Dashboard\",\n    project_id=\"proj_123\"\n)\n\nawait widget.post(\n    endpoint=\"https://api.example.com/sales\",\n    endpoint_data={\n        \"params\": {\"period\": \"weekly\"},\n        \"headers\": {\"Authorization\": \"Bearer token\"},\n        \"refresh_interval\": 300,\n        \"logic\": \"\"\"\ndef process_data(widget_data, request, user):\n    # Custom processing logic\n    revenue = widget_data.get('revenue', 0)\n    return {'revenue_formatted': f'${revenue:,.2f}'}\n        \"\"\"\n    }\n)\n\nawait widget.save()\n</code></pre>"},{"location":"advanced/custom-endpoints/#2-api-registers-dynamic-route","title":"2. API Registers Dynamic Route","text":"<p>When the widget is created, the API automatically registers a new endpoint:</p> <pre><code>GET /public/widgets/{widget_id}/execute\n</code></pre>"},{"location":"advanced/custom-endpoints/#3-endpoint-execution-flow","title":"3. Endpoint Execution Flow","text":"<pre><code>User Request \u2192 Widget Endpoint \u2192 External API \u2192 Custom Logic \u2192 Response\n     \u2193              \u2193                   \u2193              \u2193            \u2193\n   Browser      FastAPI Route      Fetch Data     Sandbox     Formatted Data\n</code></pre>"},{"location":"advanced/custom-endpoints/#custom-logic","title":"Custom Logic","text":""},{"location":"advanced/custom-endpoints/#function-signature","title":"Function Signature","text":"<p>All custom logic must define a <code>process_data</code> function:</p> <pre><code>def process_data(widget_data: dict, request: Request, user: User) -&gt; dict:\n    \"\"\"\n    Process data from external endpoint.\n\n    Args:\n        widget_data: JSON response from the external endpoint\n        request: FastAPI Request object (read-only)\n        user: User object with id, username, email\n\n    Returns:\n        dict: Processed data to return to client\n    \"\"\"\n    # Your logic here\n    return processed_data\n</code></pre>"},{"location":"advanced/custom-endpoints/#available-parameters","title":"Available Parameters","text":""},{"location":"advanced/custom-endpoints/#1-widget_data","title":"1. <code>widget_data</code>","text":"<p>The JSON response from the external endpoint:</p> <pre><code>def process_data(widget_data, request, user):\n    # Access external API data\n    sales = widget_data.get('sales', [])\n    total = sum(item['amount'] for item in sales)\n\n    return {'total_sales': total}\n</code></pre>"},{"location":"advanced/custom-endpoints/#2-request","title":"2. <code>request</code>","text":"<p>FastAPI Request object (read-only access):</p> <pre><code>def process_data(widget_data, request, user):\n    # Access request headers\n    user_agent = request.headers.get('user-agent')\n\n    # Access query parameters\n    filter_param = request.query_params.get('filter')\n\n    return {'filtered': filter_param in widget_data}\n</code></pre>"},{"location":"advanced/custom-endpoints/#3-user","title":"3. <code>user</code>","text":"<p>Current user object:</p> <pre><code>def process_data(widget_data, request, user):\n    # Access user information\n    user_id = user.id\n    username = user.username\n    email = user.email\n\n    # Customize response per user\n    return {\n        'data': widget_data,\n        'personalized_message': f'Hello, {username}!'\n    }\n</code></pre>"},{"location":"advanced/custom-endpoints/#security-sandbox","title":"Security Sandbox","text":""},{"location":"advanced/custom-endpoints/#allowed-modules","title":"Allowed Modules","text":"<p>Your custom logic can import these standard library modules:</p> <pre><code># \u2705 Allowed\nimport datetime\nimport time\nimport json\nimport re\nimport math\nimport statistics\nimport collections\nimport itertools\nfrom typing import Any, List, Dict\n</code></pre>"},{"location":"advanced/custom-endpoints/#forbidden-modules","title":"Forbidden Modules","text":"<p>These modules are blocked for security:</p> <pre><code># \u274c Forbidden - File system access\nimport os\nimport sys\nimport pathlib\nimport shutil\nimport glob\n\n# \u274c Forbidden - Network access\nimport socket\nimport requests\nimport urllib\nimport http\n\n# \u274c Forbidden - Process control\nimport subprocess\nimport multiprocessing\nimport threading\nimport signal\n\n# \u274c Forbidden - Arbitrary code execution\neval()\nexec()\ncompile()\n__import__()\n\n# \u274c Forbidden - Cloud SDKs\nimport boto3\nimport google.cloud\nimport azure\n</code></pre>"},{"location":"advanced/custom-endpoints/#resource-limits","title":"Resource Limits","text":"<p>Custom logic execution is constrained:</p> Limit Value Reason Execution Time 5 seconds Prevent infinite loops Memory 1024 MB Prevent memory exhaustion CPU Single core Isolate from other requests Recursion Depth 100 Prevent stack overflow Nesting Depth 10 Prevent deeply nested loops"},{"location":"advanced/custom-endpoints/#code-validation","title":"Code Validation","text":"<p>Before execution, code is validated using AST parsing:</p> <pre><code>import ast\n\ndef validate_code(code: str) -&gt; List[str]:\n    \"\"\"\n    Validate Python code for forbidden imports/calls.\n\n    Returns:\n        List of forbidden modules/functions found\n    \"\"\"\n    tree = ast.parse(code)\n    validator = ValidateModules()\n    validator.visit(tree)\n    return validator.found  # [] if valid, [forbidden_items] if invalid\n</code></pre>"},{"location":"advanced/custom-endpoints/#execution-sandbox","title":"Execution Sandbox","text":"<p>Code runs in an isolated process with resource limits:</p> <pre><code>import multiprocessing as mp\nimport resource\nimport signal\n\ndef run_sandboxed(code: str, context: dict, timeout: float = 5.0):\n    \"\"\"\n    Execute code in isolated process with timeout and memory limits.\n    \"\"\"\n    def target(queue: mp.Queue):\n        # Set memory limit (1024 MB)\n        resource.setrlimit(\n            resource.RLIMIT_AS,\n            (1024 * 1024 * 1024, 1024 * 1024 * 1024)\n        )\n\n        try:\n            # Execute code with context\n            exec(code, context)\n            result = context.get('process_data')(\n                context['widget_data'],\n                context['request'],\n                context['user']\n            )\n            queue.put({'success': True, 'result': result})\n        except Exception as e:\n            queue.put({'success': False, 'error': str(e)})\n\n    queue = mp.Queue()\n    process = mp.Process(target=target, args=(queue,))\n    process.start()\n    process.join(timeout=timeout)\n\n    if process.is_alive():\n        process.terminate()\n        raise TimeoutError(\"Code execution exceeded time limit\")\n\n    return queue.get()\n</code></pre>"},{"location":"advanced/custom-endpoints/#dynamic-route-registration","title":"Dynamic Route Registration","text":""},{"location":"advanced/custom-endpoints/#how-routes-are-created","title":"How Routes Are Created","text":"<p>When a widget with custom logic is saved:</p> <pre><code>from fastapi import APIRouter, FastAPI\n\napp = FastAPI()\n\n# User creates widget with custom endpoint\nwidget_id = \"widget_123abc\"\nendpoint_url = \"https://api.example.com/sales\"\ncustom_logic = \"def process_data(data, req, user): return data\"\n\n# API dynamically registers route\n@app.get(f\"/public/widgets/{widget_id}/execute\")\nasync def execute_widget(request: Request):\n    # 1. Fetch data from endpoint_url\n    async with httpx.AsyncClient() as client:\n        response = await client.get(endpoint_url)\n        widget_data = response.json()\n\n    # 2. Execute custom logic in sandbox\n    result = run_sandboxed(custom_logic, {\n        'widget_data': widget_data,\n        'request': request,\n        'user': current_user\n    })\n\n    # 3. Return processed data\n    return result\n</code></pre>"},{"location":"advanced/custom-endpoints/#route-lifecycle","title":"Route Lifecycle","text":"<pre><code>Widget Created \u2192 Validate Logic \u2192 Register Route \u2192 Route Active\n                      \u2193                \u2193               \u2193\n                  AST Check     app.add_api_route()  Accept Requests\n\nWidget Deleted \u2192 Unregister Route \u2192 Route Removed\n                      \u2193                    \u2193\n                Remove from app     404 for requests\n</code></pre>"},{"location":"advanced/custom-endpoints/#limitations","title":"Limitations","text":"<ul> <li>Routes are not reflected in OpenAPI schema automatically</li> <li>Routes persist only during application runtime (no database persistence)</li> <li>Restarting the server requires re-loading routes from database</li> </ul>"},{"location":"advanced/custom-endpoints/#advanced-examples","title":"Advanced Examples","text":""},{"location":"advanced/custom-endpoints/#example-1-data-transformation","title":"Example 1: Data Transformation","text":"<pre><code>def process_data(widget_data, request, user):\n    \"\"\"Transform sales data into chart format\"\"\"\n    sales = widget_data.get('sales', [])\n\n    # Group by month\n    from collections import defaultdict\n    monthly = defaultdict(float)\n\n    for sale in sales:\n        month = sale['date'][:7]  # YYYY-MM\n        monthly[month] += sale['amount']\n\n    # Format for chart\n    return {\n        'labels': list(monthly.keys()),\n        'data': list(monthly.values()),\n        'total': sum(monthly.values())\n    }\n</code></pre>"},{"location":"advanced/custom-endpoints/#example-2-filtering-and-sorting","title":"Example 2: Filtering and Sorting","text":"<pre><code>def process_data(widget_data, request, user):\n    \"\"\"Filter and sort items based on user preference\"\"\"\n    items = widget_data.get('items', [])\n\n    # Get user preference from request\n    sort_by = request.query_params.get('sort', 'priority')\n    filter_status = request.query_params.get('status', 'all')\n\n    # Filter\n    if filter_status != 'all':\n        items = [i for i in items if i.get('status') == filter_status]\n\n    # Sort\n    items.sort(key=lambda x: x.get(sort_by, 0), reverse=True)\n\n    return {\n        'items': items[:10],  # Top 10\n        'total': len(items),\n        'sorted_by': sort_by\n    }\n</code></pre>"},{"location":"advanced/custom-endpoints/#example-3-statistical-analysis","title":"Example 3: Statistical Analysis","text":"<pre><code>def process_data(widget_data, request, user):\n    \"\"\"Calculate statistics on numeric data\"\"\"\n    import statistics\n\n    values = [item['value'] for item in widget_data.get('data', [])]\n\n    if not values:\n        return {'error': 'No data available'}\n\n    return {\n        'mean': statistics.mean(values),\n        'median': statistics.median(values),\n        'stdev': statistics.stdev(values) if len(values) &gt; 1 else 0,\n        'min': min(values),\n        'max': max(values),\n        'count': len(values)\n    }\n</code></pre>"},{"location":"advanced/custom-endpoints/#example-4-time-based-processing","title":"Example 4: Time-based Processing","text":"<pre><code>def process_data(widget_data, request, user):\n    \"\"\"Process time-series data\"\"\"\n    from datetime import datetime, timedelta\n\n    events = widget_data.get('events', [])\n\n    # Get events from last 24 hours\n    now = datetime.utcnow()\n    cutoff = now - timedelta(hours=24)\n\n    recent_events = [\n        e for e in events\n        if datetime.fromisoformat(e['timestamp']) &gt; cutoff\n    ]\n\n    return {\n        'total_events': len(events),\n        'recent_events': len(recent_events),\n        'recent_percentage': (len(recent_events) / len(events) * 100) if events else 0\n    }\n</code></pre>"},{"location":"advanced/custom-endpoints/#example-5-user-personalized-data","title":"Example 5: User-Personalized Data","text":"<pre><code>def process_data(widget_data, request, user):\n    \"\"\"Personalize widget data per user\"\"\"\n    all_items = widget_data.get('items', [])\n\n    # Filter items relevant to current user\n    user_items = [\n        item for item in all_items\n        if user.id in item.get('assigned_users', [])\n    ]\n\n    # Calculate user-specific metrics\n    total_value = sum(item.get('value', 0) for item in user_items)\n\n    return {\n        'user_id': user.id,\n        'username': user.username,\n        'assigned_items': len(user_items),\n        'total_value': total_value,\n        'items': user_items[:5]  # Top 5\n    }\n</code></pre>"},{"location":"advanced/custom-endpoints/#error-handling","title":"Error Handling","text":""},{"location":"advanced/custom-endpoints/#validation-errors","title":"Validation Errors","text":"<pre><code># Code with forbidden import\ncode = \"\"\"\nimport os  # \u274c Forbidden!\n\ndef process_data(data, req, user):\n    return os.listdir('/')  # Security risk\n\"\"\"\n\n# Validation catches this\nforbidden = validate_code(code)\n# Returns: ['os']\n\n# Error response\n{\n    \"detail\": \"Code validation failed: Forbidden module 'os' detected\",\n    \"error_code\": \"FORBIDDEN_MODULE\",\n    \"forbidden_modules\": [\"os\"]\n}\n</code></pre>"},{"location":"advanced/custom-endpoints/#runtime-errors","title":"Runtime Errors","text":"<pre><code># Code with runtime error\ncode = \"\"\"\ndef process_data(data, req, user):\n    return data['missing_key']  # KeyError!\n\"\"\"\n\n# Sandbox catches exception\n# Error response\n{\n    \"detail\": \"Code execution error: 'missing_key'\",\n    \"error_code\": \"EXECUTION_ERROR\",\n    \"error_type\": \"KeyError\"\n}\n</code></pre>"},{"location":"advanced/custom-endpoints/#timeout-errors","title":"Timeout Errors","text":"<pre><code># Code with infinite loop\ncode = \"\"\"\ndef process_data(data, req, user):\n    while True:  # \u274c Infinite loop\n        pass\n    return {}\n\"\"\"\n\n# Sandbox terminates after 5 seconds\n# Error response\n{\n    \"detail\": \"Code execution exceeded time limit (5 seconds)\",\n    \"error_code\": \"TIMEOUT_ERROR\"\n}\n</code></pre>"},{"location":"advanced/custom-endpoints/#best-practices","title":"Best Practices","text":""},{"location":"advanced/custom-endpoints/#1-keep-logic-simple","title":"1. Keep Logic Simple","text":"<pre><code># \u2705 Good - simple, focused\ndef process_data(data, req, user):\n    return {'total': sum(data.get('values', []))}\n\n# \u274c Bad - complex, error-prone\ndef process_data(data, req, user):\n    # 100 lines of complex logic...\n</code></pre>"},{"location":"advanced/custom-endpoints/#2-handle-missing-data","title":"2. Handle Missing Data","text":"<pre><code># \u2705 Good - defensive programming\ndef process_data(data, req, user):\n    items = data.get('items', [])\n    if not items:\n        return {'error': 'No data available'}\n\n    return {'count': len(items)}\n\n# \u274c Bad - assumes data exists\ndef process_data(data, req, user):\n    return {'count': len(data['items'])}  # KeyError if missing\n</code></pre>"},{"location":"advanced/custom-endpoints/#3-validate-input","title":"3. Validate Input","text":"<pre><code>def process_data(data, req, user):\n    # Validate expected structure\n    if not isinstance(data, dict):\n        return {'error': 'Invalid data format'}\n\n    if 'sales' not in data:\n        return {'error': 'Missing sales data'}\n\n    # Process validated data\n    return {'total': sum(s['amount'] for s in data['sales'])}\n</code></pre>"},{"location":"advanced/custom-endpoints/#4-return-consistent-structure","title":"4. Return Consistent Structure","text":"<pre><code># \u2705 Good - consistent response\ndef process_data(data, req, user):\n    if error_condition:\n        return {'success': False, 'error': 'Error message'}\n\n    return {\n        'success': True,\n        'data': processed_data\n    }\n\n# \u274c Bad - inconsistent responses\ndef process_data(data, req, user):\n    if error_condition:\n        return None  # or raises exception\n\n    return processed_data  # different structure\n</code></pre>"},{"location":"advanced/custom-endpoints/#testing-custom-logic","title":"Testing Custom Logic","text":""},{"location":"advanced/custom-endpoints/#local-testing","title":"Local Testing","text":"<pre><code># test_custom_logic.py\ndef test_process_data():\n    # Mock data\n    widget_data = {\n        'sales': [\n            {'amount': 100, 'date': '2024-01'},\n            {'amount': 200, 'date': '2024-02'}\n        ]\n    }\n\n    # Mock request and user\n    class MockRequest:\n        query_params = {}\n\n    class MockUser:\n        id = 'user_123'\n        username = 'test_user'\n\n    # Execute logic\n    code = \"\"\"\ndef process_data(data, req, user):\n    total = sum(s['amount'] for s in data.get('sales', []))\n    return {'total': total}\n    \"\"\"\n\n    context = {\n        'widget_data': widget_data,\n        'request': MockRequest(),\n        'user': MockUser()\n    }\n\n    exec(code, context)\n    result = context['process_data'](widget_data, MockRequest(), MockUser())\n\n    assert result == {'total': 300}\n</code></pre>"},{"location":"advanced/custom-endpoints/#integration-testing","title":"Integration Testing","text":"<pre><code>import httpx\nimport pytest\n\n@pytest.mark.asyncio\nasync def test_widget_endpoint():\n    # Create widget with custom logic\n    widget_id = await create_test_widget()\n\n    # Execute endpoint\n    async with httpx.AsyncClient() as client:\n        response = await client.get(\n            f\"https://api.lazi.app/public/widgets/{widget_id}/execute\",\n            headers={\"Authorization\": f\"Bearer {test_token}\"}\n        )\n\n    # Verify response\n    assert response.status_code == 200\n    data = response.json()\n    assert 'total' in data\n</code></pre>"},{"location":"advanced/custom-endpoints/#next-steps","title":"Next Steps","text":"<ul> <li>Security Best Practices - Security guidelines</li> <li>OAuth2 Scopes - Permission management</li> <li>SDK Examples - Complete examples</li> </ul>"},{"location":"advanced/scopes/","title":"OAuth2 Scopes","text":"<p>Comprehensive guide to OAuth2 scopes in the Lazi API.</p>"},{"location":"advanced/scopes/#overview","title":"Overview","text":"<p>OAuth2 scopes provide granular permission control for API access. Each scope represents a specific permission level for a resource type.</p>"},{"location":"advanced/scopes/#scope-format","title":"Scope Format","text":"<p>Scopes follow the pattern: <code>resource:permission</code></p> <pre><code>widgets:read      # Read widgets\nprojects:write    # Create/update projects\nfiles:delete      # Delete files\n</code></pre>"},{"location":"advanced/scopes/#available-scopes","title":"Available Scopes","text":""},{"location":"advanced/scopes/#widget-scopes","title":"Widget Scopes","text":"Scope Permission Description <code>widgets:read</code> Read View widget data and metadata <code>widgets:write</code> Create/Update Create new widgets and modify existing ones <code>widgets:delete</code> Delete Delete widgets <code>widgets:admin</code> Full Control All widget operations + manage permissions"},{"location":"advanced/scopes/#project-scopes","title":"Project Scopes","text":"Scope Permission Description <code>projects:read</code> Read View project details and members <code>projects:write</code> Create/Update Create projects and modify settings <code>projects:delete</code> Delete Delete projects <code>projects:admin</code> Full Control All project operations + manage members"},{"location":"advanced/scopes/#file-scopes","title":"File Scopes","text":"Scope Permission Description <code>files:read</code> Read View file metadata and download files <code>files:write</code> Upload Upload and attach media files <code>files:delete</code> Delete Delete files <code>files:admin</code> Full Control All file operations + manage storage"},{"location":"advanced/scopes/#organization-scopes","title":"Organization Scopes","text":"Scope Permission Description <code>organizations:read</code> Read View organization details <code>organizations:write</code> Create/Update Manage organization settings <code>organizations:delete</code> Delete Delete organizations <code>organizations:admin</code> Full Control All organization operations"},{"location":"advanced/scopes/#user-scopes","title":"User Scopes","text":"Scope Permission Description <code>user:read</code> Read View user profile <code>user:write</code> Update Update user settings <code>user:email</code> Email Access Access user email address"},{"location":"advanced/scopes/#admin-scopes","title":"Admin Scopes","text":"Scope Permission Description <code>admin:users</code> User Management Manage all users <code>admin:system</code> System Control System-level operations"},{"location":"advanced/scopes/#scope-hierarchies","title":"Scope Hierarchies","text":"<p>Admin scopes include all lower-level permissions:</p>"},{"location":"advanced/scopes/#widget-hierarchy","title":"Widget Hierarchy","text":"<pre><code>widgets:admin\n    \u251c\u2500\u2500 widgets:delete\n    \u2502   \u251c\u2500\u2500 widgets:write\n    \u2502   \u2502   \u2514\u2500\u2500 widgets:read\n    \u2502   \u2514\u2500\u2500 widgets:read\n    \u2514\u2500\u2500 widgets:read\n</code></pre> <p>Example: A token with <code>widgets:admin</code> automatically has <code>widgets:delete</code>, <code>widgets:write</code>, and <code>widgets:read</code> permissions.</p>"},{"location":"advanced/scopes/#project-hierarchy","title":"Project Hierarchy","text":"<pre><code>projects:admin\n    \u251c\u2500\u2500 projects:delete\n    \u2502   \u251c\u2500\u2500 projects:write\n    \u2502   \u2502   \u2514\u2500\u2500 projects:read\n    \u2502   \u2514\u2500\u2500 projects:read\n    \u2514\u2500\u2500 projects:read\n</code></pre>"},{"location":"advanced/scopes/#file-hierarchy","title":"File Hierarchy","text":"<pre><code>files:admin\n    \u251c\u2500\u2500 files:delete\n    \u2502   \u251c\u2500\u2500 files:write\n    \u2502   \u2502   \u2514\u2500\u2500 files:read\n    \u2502   \u2514\u2500\u2500 files:read\n    \u2514\u2500\u2500 files:read\n</code></pre>"},{"location":"advanced/scopes/#requesting-scopes","title":"Requesting Scopes","text":""},{"location":"advanced/scopes/#minimum-required-scopes","title":"Minimum Required Scopes","text":"<p>Always request the minimum scopes needed for your application:</p> <pre><code># \u2705 Good - minimal scopes\nscopes = \"widgets:read projects:read\"\n\n# \u274c Bad - excessive permissions\nscopes = \"widgets:admin projects:admin files:admin\"\n</code></pre>"},{"location":"advanced/scopes/#oauth2-token-request","title":"OAuth2 Token Request","text":"<pre><code>import httpx\n\nasync def request_token_with_scopes():\n    url = \"https://api.lazi.app/public/oauth/token\"\n\n    data = {\n        \"username\": \"user@example.com\",\n        \"password\": \"password\",\n        \"grant_type\": \"password\",\n        \"scope\": \"widgets:read widgets:write projects:read\"\n    }\n\n    async with httpx.AsyncClient() as client:\n        response = await client.post(url, data=data)\n        token_data = response.json()\n\n        # Verify granted scopes\n        granted_scopes = token_data[\"scope\"].split()\n        print(f\"Granted scopes: {granted_scopes}\")\n</code></pre>"},{"location":"advanced/scopes/#multiple-scopes","title":"Multiple Scopes","text":"<p>Request multiple scopes as a space-separated string:</p> <pre><code># Correct format\nscope = \"widgets:read widgets:write projects:read files:write\"\n\n# \u274c Wrong - comma-separated\nscope = \"widgets:read,widgets:write,projects:read\"  # This will fail\n</code></pre>"},{"location":"advanced/scopes/#scope-validation","title":"Scope Validation","text":""},{"location":"advanced/scopes/#api-endpoint-requirements","title":"API Endpoint Requirements","text":"<p>Each endpoint specifies required scopes:</p> Endpoint HTTP Method Required Scope <code>GET /widgets</code> GET <code>widgets:read</code> <code>POST /widgets</code> POST <code>widgets:write</code> <code>PATCH /widgets/{id}</code> PATCH <code>widgets:write</code> <code>DELETE /widgets/{id}</code> DELETE <code>widgets:delete</code> <code>GET /projects</code> GET <code>projects:read</code> <code>POST /projects</code> POST <code>projects:write</code> <code>POST /widgets/{id}/media</code> POST <code>widgets:write</code> + <code>files:write</code>"},{"location":"advanced/scopes/#multiple-scope-requirements","title":"Multiple Scope Requirements","text":"<p>Some endpoints require multiple scopes:</p> <pre><code># Attach media to widget requires both scopes\nrequired_scopes = [\"widgets:write\", \"files:write\"]\n\n# Your token must have both\ntoken_scopes = \"widgets:write files:write\"\n</code></pre>"},{"location":"advanced/scopes/#insufficient-scope-error","title":"Insufficient Scope Error","text":"<pre><code>{\n  \"detail\": \"Insufficient permissions. Required scope: widgets:write\",\n  \"error_code\": \"INSUFFICIENT_SCOPE\",\n  \"required_scopes\": [\"widgets:write\"],\n  \"provided_scopes\": [\"widgets:read\"]\n}\n</code></pre>"},{"location":"advanced/scopes/#scope-best-practices","title":"Scope Best Practices","text":""},{"location":"advanced/scopes/#1-principle-of-least-privilege","title":"1. Principle of Least Privilege","text":"<p>Grant only necessary permissions:</p> <pre><code># \u2705 Good - read-only dashboard\nscopes = \"widgets:read projects:read\"\n\n# \u2705 Good - widget creator app\nscopes = \"widgets:write files:write projects:read\"\n\n# \u274c Bad - requesting admin unnecessarily\nscopes = \"widgets:admin projects:admin\"\n</code></pre>"},{"location":"advanced/scopes/#2-separate-service-accounts","title":"2. Separate Service Accounts","text":"<p>Use different tokens for different purposes:</p> <pre><code># Analytics service (read-only)\nanalytics_scopes = \"widgets:read projects:read\"\n\n# Widget creator service\ncreator_scopes = \"widgets:write files:write\"\n\n# Admin dashboard\nadmin_scopes = \"widgets:admin projects:admin\"\n</code></pre>"},{"location":"advanced/scopes/#3-scope-rotation","title":"3. Scope Rotation","text":"<p>Rotate scopes when requirements change:</p> <pre><code>class APIClient:\n    def __init__(self, token: str):\n        self.token = token\n        self.scopes = self._parse_token_scopes()\n\n    def _parse_token_scopes(self) -&gt; list[str]:\n        \"\"\"Extract scopes from JWT token\"\"\"\n        import jwt\n        payload = jwt.decode(self.token, options={\"verify_signature\": False})\n        return payload.get(\"scopes\", [])\n\n    def can_perform(self, required_scope: str) -&gt; bool:\n        \"\"\"Check if token has required scope\"\"\"\n        return required_scope in self.scopes or \\\n               self._has_admin_scope(required_scope)\n\n    def _has_admin_scope(self, required_scope: str) -&gt; bool:\n        \"\"\"Check if admin scope covers required scope\"\"\"\n        resource = required_scope.split(\":\")[0]\n        return f\"{resource}:admin\" in self.scopes\n</code></pre>"},{"location":"advanced/scopes/#4-request-validation","title":"4. Request Validation","text":"<p>Validate scopes before making requests:</p> <pre><code>async def create_widget_safely(client: APIClient, widget_data: dict):\n    if not client.can_perform(\"widgets:write\"):\n        raise PermissionError(\n            \"Token lacks widgets:write scope. \"\n            \"Please request a new token with appropriate scopes.\"\n        )\n\n    # Proceed with widget creation\n    return await client.create_widget(widget_data)\n</code></pre>"},{"location":"advanced/scopes/#dynamic-scopes","title":"Dynamic Scopes","text":""},{"location":"advanced/scopes/#user-specific-scopes","title":"User-Specific Scopes","text":"<p>Scopes can be limited by user roles:</p> <pre><code># Regular user - limited scopes\nuser_scopes = \"widgets:read widgets:write projects:read\"\n\n# Team admin - extended scopes\nadmin_scopes = \"widgets:admin projects:write organizations:read\"\n\n# System admin - full access\nsystem_scopes = \"admin:users admin:system\"\n</code></pre>"},{"location":"advanced/scopes/#resource-specific-scopes","title":"Resource-Specific Scopes","text":"<p>Future enhancement: Scope to specific resources:</p> <pre><code># Access only specific project (planned feature)\nscopes = \"projects:proj_123abc:read widgets:proj_123abc:write\"\n</code></pre>"},{"location":"advanced/scopes/#scope-auditing","title":"Scope Auditing","text":""},{"location":"advanced/scopes/#monitoring-scope-usage","title":"Monitoring Scope Usage","text":"<p>Track which scopes are being used:</p> <pre><code>import logging\nfrom functools import wraps\n\ndef audit_scope_usage(required_scope: str):\n    \"\"\"Decorator to audit scope usage\"\"\"\n    def decorator(func):\n        @wraps(func)\n        async def wrapper(*args, **kwargs):\n            logger = logging.getLogger(\"scope_audit\")\n            logger.info(f\"Function {func.__name__} requires scope: {required_scope}\")\n\n            # Execute function\n            result = await func(*args, **kwargs)\n\n            logger.info(f\"Scope {required_scope} used successfully\")\n            return result\n\n        return wrapper\n    return decorator\n\n# Usage\n@audit_scope_usage(\"widgets:write\")\nasync def create_widget(data: dict):\n    # Widget creation logic\n    pass\n</code></pre>"},{"location":"advanced/scopes/#scope-usage-analytics","title":"Scope Usage Analytics","text":"<pre><code>from collections import Counter\nfrom datetime import datetime\n\nclass ScopeAnalytics:\n    def __init__(self):\n        self.usage_counter = Counter()\n        self.last_used = {}\n\n    def record_usage(self, scope: str):\n        \"\"\"Record scope usage\"\"\"\n        self.usage_counter[scope] += 1\n        self.last_used[scope] = datetime.utcnow()\n\n    def get_most_used_scopes(self, top_n: int = 5):\n        \"\"\"Get most frequently used scopes\"\"\"\n        return self.usage_counter.most_common(top_n)\n\n    def get_unused_scopes(self, all_scopes: list[str]):\n        \"\"\"Find granted but unused scopes\"\"\"\n        used_scopes = set(self.usage_counter.keys())\n        return set(all_scopes) - used_scopes\n</code></pre>"},{"location":"advanced/scopes/#scope-migration","title":"Scope Migration","text":""},{"location":"advanced/scopes/#adding-new-scopes","title":"Adding New Scopes","text":"<p>When adding functionality, request additional scopes:</p> <pre><code>async def upgrade_token_scopes(current_token: str, additional_scopes: str):\n    \"\"\"Request new token with additional scopes\"\"\"\n    # Get current scopes from token\n    import jwt\n    payload = jwt.decode(current_token, options={\"verify_signature\": False})\n    current_scopes = payload.get(\"scopes\", [])\n\n    # Combine with new scopes\n    all_scopes = \" \".join(current_scopes + additional_scopes.split())\n\n    # Request new token\n    # ... (token request logic)\n</code></pre>"},{"location":"advanced/scopes/#deprecating-scopes","title":"Deprecating Scopes","text":"<p>Handle deprecated scopes gracefully:</p> <pre><code>DEPRECATED_SCOPES = {\n    \"widgets:full\": \"widgets:admin\",  # Old -&gt; New\n    \"projects:manage\": \"projects:write\"\n}\n\ndef normalize_scopes(scopes: list[str]) -&gt; list[str]:\n    \"\"\"Convert deprecated scopes to new equivalents\"\"\"\n    normalized = []\n\n    for scope in scopes:\n        if scope in DEPRECATED_SCOPES:\n            new_scope = DEPRECATED_SCOPES[scope]\n            print(f\"Warning: Scope '{scope}' is deprecated. Use '{new_scope}' instead.\")\n            normalized.append(new_scope)\n        else:\n            normalized.append(scope)\n\n    return list(set(normalized))  # Remove duplicates\n</code></pre>"},{"location":"advanced/scopes/#security-considerations","title":"Security Considerations","text":""},{"location":"advanced/scopes/#1-never-hardcode-scopes","title":"1. Never Hardcode Scopes","text":"<pre><code># \u274c Bad - hardcoded in source code\nSCOPES = \"widgets:admin projects:admin files:admin\"\n\n# \u2705 Good - environment variable\nSCOPES = os.getenv(\"API_SCOPES\", \"widgets:read projects:read\")\n</code></pre>"},{"location":"advanced/scopes/#2-validate-scope-format","title":"2. Validate Scope Format","text":"<pre><code>import re\n\ndef validate_scope(scope: str) -&gt; bool:\n    \"\"\"Validate scope format\"\"\"\n    pattern = r'^[a-z]+:[a-z]+$'\n    return bool(re.match(pattern, scope))\n\ndef validate_scopes(scopes: str) -&gt; bool:\n    \"\"\"Validate multiple scopes\"\"\"\n    for scope in scopes.split():\n        if not validate_scope(scope):\n            raise ValueError(f\"Invalid scope format: {scope}\")\n    return True\n</code></pre>"},{"location":"advanced/scopes/#3-scope-injection-prevention","title":"3. Scope Injection Prevention","text":"<pre><code>def sanitize_scope_request(user_input: str) -&gt; str:\n    \"\"\"Prevent scope injection attacks\"\"\"\n    # Define allowed scopes\n    ALLOWED_SCOPES = {\n        \"widgets:read\", \"widgets:write\", \"widgets:delete\",\n        \"projects:read\", \"projects:write\", \"projects:delete\",\n        \"files:read\", \"files:write\", \"files:delete\"\n    }\n\n    # Parse and validate\n    requested = set(user_input.split())\n    valid = requested &amp; ALLOWED_SCOPES\n\n    if requested - valid:\n        invalid = requested - valid\n        raise ValueError(f\"Invalid scopes requested: {invalid}\")\n\n    return \" \".join(valid)\n</code></pre>"},{"location":"advanced/scopes/#complete-example","title":"Complete Example","text":"<pre><code>import os\nimport httpx\nfrom typing import List\n\nclass ScopedAPIClient:\n    \"\"\"API client with scope management\"\"\"\n\n    def __init__(self, username: str, password: str):\n        self.username = username\n        self.password = password\n        self.token = None\n        self.scopes = []\n\n    async def authenticate(self, requested_scopes: str):\n        \"\"\"Authenticate with specific scopes\"\"\"\n        url = \"https://api.lazi.app/public/oauth/token\"\n\n        data = {\n            \"username\": self.username,\n            \"password\": self.password,\n            \"grant_type\": \"password\",\n            \"scope\": requested_scopes\n        }\n\n        async with httpx.AsyncClient() as client:\n            response = await client.post(url, data=data)\n\n            if response.status_code == 200:\n                token_data = response.json()\n                self.token = token_data[\"access_token\"]\n                self.scopes = token_data[\"scope\"].split()\n                return True\n\n            return False\n\n    def requires_scope(self, scope: str):\n        \"\"\"Decorator to check scope before API call\"\"\"\n        def decorator(func):\n            async def wrapper(*args, **kwargs):\n                if not self.has_scope(scope):\n                    raise PermissionError(\n                        f\"Operation requires scope: {scope}. \"\n                        f\"Available scopes: {', '.join(self.scopes)}\"\n                    )\n                return await func(*args, **kwargs)\n            return wrapper\n        return decorator\n\n    def has_scope(self, required_scope: str) -&gt; bool:\n        \"\"\"Check if client has required scope\"\"\"\n        if required_scope in self.scopes:\n            return True\n\n        # Check for admin scope\n        resource = required_scope.split(\":\")[0]\n        return f\"{resource}:admin\" in self.scopes\n\n    @requires_scope(\"widgets:read\")\n    async def list_widgets(self, project_id: str):\n        \"\"\"List widgets (requires widgets:read)\"\"\"\n        # Implementation\n        pass\n\n    @requires_scope(\"widgets:write\")\n    async def create_widget(self, widget_data: dict):\n        \"\"\"Create widget (requires widgets:write)\"\"\"\n        # Implementation\n        pass\n\n# Usage\nasync def main():\n    client = ScopedAPIClient(\n        username=\"user@example.com\",\n        password=\"password\"\n    )\n\n    # Authenticate with minimal scopes\n    await client.authenticate(\"widgets:read projects:read\")\n\n    # This works\n    await client.list_widgets(\"proj_123\")\n\n    # This raises PermissionError\n    try:\n        await client.create_widget({\"name\": \"New Widget\"})\n    except PermissionError as e:\n        print(f\"Error: {e}\")\n\n        # Re-authenticate with additional scopes\n        await client.authenticate(\"widgets:write projects:read\")\n\n        # Now it works\n        await client.create_widget({\"name\": \"New Widget\"})\n</code></pre>"},{"location":"advanced/scopes/#next-steps","title":"Next Steps","text":"<ul> <li>Authentication API - OAuth2 endpoints</li> <li>Security Best Practices - Security guidelines</li> <li>Custom Endpoints - Dynamic endpoints</li> </ul>"},{"location":"advanced/security/","title":"Security Best Practices","text":"<p>Comprehensive security guidelines for using the Lazi API.</p>"},{"location":"advanced/security/#overview","title":"Overview","text":"<p>Security is paramount when building applications with the Lazi API. This guide covers best practices for authentication, data protection, code execution, and more.</p>"},{"location":"advanced/security/#authentication-security","title":"Authentication Security","text":""},{"location":"advanced/security/#1-token-storage","title":"1. Token Storage","text":"<p>Never store tokens insecurely:</p> <pre><code># \u274c NEVER DO THIS\n# Hardcoded in source code\nTOKEN = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...\"\n\n# In localStorage (vulnerable to XSS)\nlocalStorage.setItem('token', token)\n\n# In cookies without HttpOnly flag\ndocument.cookie = `token=${token}`\n\n# In version control\n# config.py:\n# API_TOKEN = \"actual_token_here\"\n</code></pre> <p>\u2705 Secure token storage:</p> <pre><code># Environment variables\nimport os\nTOKEN = os.getenv(\"LAZI_API_TOKEN\")\n\n# Encrypted credential store\nfrom keyring import get_password\nTOKEN = get_password(\"lazi_api\", \"access_token\")\n\n# HTTP-only cookies (for web apps)\nresponse.set_cookie(\n    key=\"access_token\",\n    value=token,\n    httponly=True,\n    secure=True,  # HTTPS only\n    samesite=\"strict\"\n)\n\n# System keychain (macOS/Windows)\nimport keyring\nkeyring.set_password(\"lazi_api\", \"user@example.com\", token)\n</code></pre>"},{"location":"advanced/security/#2-token-rotation","title":"2. Token Rotation","text":"<p>Implement automatic token refresh:</p> <pre><code>import httpx\nfrom datetime import datetime, timedelta\n\nclass TokenManager:\n    def __init__(self):\n        self.access_token = None\n        self.refresh_token = None\n        self.expires_at = None\n\n    async def get_valid_token(self) -&gt; str:\n        \"\"\"Get valid access token, refreshing if needed\"\"\"\n        if not self.access_token or self._is_expired():\n            await self.refresh()\n\n        return self.access_token\n\n    def _is_expired(self) -&gt; bool:\n        \"\"\"Check if token is expired or about to expire\"\"\"\n        if not self.expires_at:\n            return True\n\n        # Refresh 5 minutes before expiration\n        buffer = timedelta(minutes=5)\n        return datetime.utcnow() + buffer &gt;= self.expires_at\n\n    async def refresh(self):\n        \"\"\"Refresh access token\"\"\"\n        async with httpx.AsyncClient() as client:\n            response = await client.post(\n                \"https://api.lazi.app/public/oauth/token/refresh\",\n                json={\"refresh_token\": self.refresh_token}\n            )\n\n            if response.status_code == 200:\n                data = response.json()\n                self.access_token = data[\"access_token\"]\n                self.refresh_token = data[\"refresh_token\"]\n                self.expires_at = datetime.utcnow() + timedelta(seconds=data[\"expires_in\"])\n            else:\n                # Re-authenticate if refresh fails\n                await self.authenticate()\n</code></pre>"},{"location":"advanced/security/#3-scope-minimization","title":"3. Scope Minimization","text":"<p>Request only necessary scopes:</p> <pre><code># \u2705 Good - minimal scopes\nscopes = \"widgets:read projects:read\"\n\n# \u274c Bad - excessive permissions\nscopes = \"widgets:admin projects:admin files:admin\"\n\n# \u2705 Best - separate tokens for different operations\nclass APIClient:\n    def __init__(self):\n        # Read-only token for analytics\n        self.read_token = self._get_token(\"widgets:read projects:read\")\n\n        # Write token for operations\n        self.write_token = self._get_token(\"widgets:write files:write\")\n\n        # Admin token for management (separate service)\n        self.admin_token = None  # Only when needed\n</code></pre>"},{"location":"advanced/security/#4-token-revocation","title":"4. Token Revocation","text":"<p>Revoke tokens when no longer needed:</p> <pre><code>async def logout(token: str, refresh_token: str):\n    \"\"\"Revoke tokens on logout\"\"\"\n    url = \"https://api.lazi.app/public/oauth/revoke\"\n\n    headers = {\"Authorization\": f\"Bearer {token}\"}\n\n    async with httpx.AsyncClient() as client:\n        # Revoke refresh token\n        await client.post(\n            url,\n            headers=headers,\n            json={\n                \"token\": refresh_token,\n                \"token_type_hint\": \"refresh_token\"\n            }\n        )\n\n        # Clear local storage\n        delete_stored_tokens()\n</code></pre>"},{"location":"advanced/security/#api-security","title":"API Security","text":""},{"location":"advanced/security/#1-https-only","title":"1. HTTPS Only","text":"<p>Always use HTTPS:</p> <pre><code># \u2705 Good\nAPI_BASE_URL = \"https://api.lazi.app\"\n\n# \u274c NEVER use HTTP in production\nAPI_BASE_URL = \"http://api.lazi.app\"\n\n# Enforce HTTPS in client\nimport httpx\n\nclass SecureClient:\n    def __init__(self):\n        # Timeout prevents hanging requests\n        self.client = httpx.AsyncClient(\n            timeout=30.0,\n            follow_redirects=True,\n            verify=True  # Verify SSL certificates\n        )\n\n    async def request(self, method: str, url: str, **kwargs):\n        if not url.startswith(\"https://\"):\n            raise ValueError(\"Only HTTPS URLs are allowed\")\n\n        return await self.client.request(method, url, **kwargs)\n</code></pre>"},{"location":"advanced/security/#2-input-validation","title":"2. Input Validation","text":"<p>Validate all user input:</p> <pre><code>from pydantic import BaseModel, validator, Field\nimport re\n\nclass WidgetCreateRequest(BaseModel):\n    name: str = Field(..., min_length=1, max_length=100)\n    description: str = Field(None, max_length=500)\n    size: str = Field(default=\"small\")\n\n    @validator('name')\n    def validate_name(cls, v):\n        # No special characters that could cause issues\n        if not re.match(r'^[a-zA-Z0-9\\s\\-_]+$', v):\n            raise ValueError('Name contains invalid characters')\n        return v\n\n    @validator('size')\n    def validate_size(cls, v):\n        allowed = ['small', 'medium', 'large', 'extra_large']\n        if v not in allowed:\n            raise ValueError(f'Size must be one of: {\", \".join(allowed)}')\n        return v\n\n# Usage\ntry:\n    request = WidgetCreateRequest(\n        name=\"Dashboard Widget\",\n        size=\"medium\"\n    )\nexcept ValueError as e:\n    print(f\"Validation error: {e}\")\n</code></pre>"},{"location":"advanced/security/#3-rate-limiting","title":"3. Rate Limiting","text":"<p>Implement client-side rate limiting:</p> <pre><code>import asyncio\nfrom datetime import datetime, timedelta\nfrom collections import deque\n\nclass RateLimiter:\n    def __init__(self, max_requests: int, window_seconds: int):\n        self.max_requests = max_requests\n        self.window = timedelta(seconds=window_seconds)\n        self.requests = deque()\n\n    async def acquire(self):\n        \"\"\"Wait if rate limit would be exceeded\"\"\"\n        now = datetime.utcnow()\n\n        # Remove old requests outside window\n        while self.requests and self.requests[0] &lt; now - self.window:\n            self.requests.popleft()\n\n        # Check if at limit\n        if len(self.requests) &gt;= self.max_requests:\n            # Calculate wait time\n            oldest = self.requests[0]\n            wait_until = oldest + self.window\n            wait_seconds = (wait_until - now).total_seconds()\n\n            if wait_seconds &gt; 0:\n                await asyncio.sleep(wait_seconds)\n                return await self.acquire()\n\n        # Record this request\n        self.requests.append(now)\n\n# Usage\nlimiter = RateLimiter(max_requests=100, window_seconds=3600)\n\nasync def create_widget_with_rate_limit(data: dict):\n    await limiter.acquire()\n    # Now safe to make request\n    return await create_widget(data)\n</code></pre>"},{"location":"advanced/security/#4-retry-logic-with-exponential-backoff","title":"4. Retry Logic with Exponential Backoff","text":"<p>Handle transient failures securely:</p> <pre><code>import asyncio\nimport random\n\nasync def retry_with_backoff(\n    func,\n    max_retries: int = 3,\n    base_delay: float = 1.0,\n    max_delay: float = 60.0\n):\n    \"\"\"Retry function with exponential backoff\"\"\"\n\n    for attempt in range(max_retries):\n        try:\n            return await func()\n\n        except httpx.HTTPStatusError as e:\n            # Don't retry client errors (4xx)\n            if 400 &lt;= e.response.status_code &lt; 500:\n                raise\n\n            # Retry server errors (5xx) and timeouts\n            if attempt &lt; max_retries - 1:\n                # Exponential backoff with jitter\n                delay = min(\n                    base_delay * (2 ** attempt) + random.uniform(0, 1),\n                    max_delay\n                )\n\n                await asyncio.sleep(delay)\n            else:\n                raise\n\n        except httpx.TimeoutException:\n            if attempt &lt; max_retries - 1:\n                delay = min(base_delay * (2 ** attempt), max_delay)\n                await asyncio.sleep(delay)\n            else:\n                raise\n\n# Usage\nasync def create_widget_resilient(data: dict):\n    return await retry_with_backoff(\n        lambda: create_widget(data),\n        max_retries=3\n    )\n</code></pre>"},{"location":"advanced/security/#code-execution-security","title":"Code Execution Security","text":""},{"location":"advanced/security/#1-never-execute-untrusted-code-directly","title":"1. Never Execute Untrusted Code Directly","text":"<pre><code># \u274c EXTREMELY DANGEROUS\nuser_code = request.json.get('code')\nexec(user_code)  # Never do this!\n\n# \u2705 Use sandboxed execution\nfrom api.config.strict_pyenv import validate_code, ValidateRunTime\n\ndef execute_user_code_safely(code: str, context: dict):\n    # 1. Validate code\n    forbidden = validate_code(code)\n    if forbidden:\n        raise ValueError(f\"Forbidden modules: {forbidden}\")\n\n    # 2. Execute in sandbox\n    validator = ValidateRunTime(timeout=5.0, memory_limit=1024.0)\n    result = validator.run(code, context)\n\n    return result\n</code></pre>"},{"location":"advanced/security/#2-restrict-imports","title":"2. Restrict Imports","text":"<pre><code># Define allowed modules\nALLOWED_MODULES = {\n    'datetime', 'time', 'json', 're', 'math',\n    'statistics', 'collections', 'itertools'\n}\n\ndef check_imports(code: str) -&gt; bool:\n    \"\"\"Check if code only uses allowed modules\"\"\"\n    import ast\n\n    tree = ast.parse(code)\n\n    for node in ast.walk(tree):\n        if isinstance(node, ast.Import):\n            for alias in node.names:\n                module = alias.name.split('.')[0]\n                if module not in ALLOWED_MODULES:\n                    raise ValueError(f\"Module '{module}' not allowed\")\n\n        elif isinstance(node, ast.ImportFrom):\n            if node.module:\n                module = node.module.split('.')[0]\n                if module not in ALLOWED_MODULES:\n                    raise ValueError(f\"Module '{module}' not allowed\")\n\n    return True\n</code></pre>"},{"location":"advanced/security/#3-timeout-protection","title":"3. Timeout Protection","text":"<pre><code>import signal\nfrom contextlib import contextmanager\n\n@contextmanager\ndef timeout(seconds: int):\n    \"\"\"Context manager for timeouts\"\"\"\n\n    def timeout_handler(signum, frame):\n        raise TimeoutError(f\"Operation exceeded {seconds} seconds\")\n\n    # Set alarm\n    signal.signal(signal.SIGALRM, timeout_handler)\n    signal.alarm(seconds)\n\n    try:\n        yield\n    finally:\n        # Cancel alarm\n        signal.alarm(0)\n\n# Usage\ntry:\n    with timeout(5):\n        result = execute_user_code(code)\nexcept TimeoutError as e:\n    print(f\"Code execution timed out: {e}\")\n</code></pre>"},{"location":"advanced/security/#data-protection","title":"Data Protection","text":""},{"location":"advanced/security/#1-sensitive-data-handling","title":"1. Sensitive Data Handling","text":"<pre><code>import os\nfrom cryptography.fernet import Fernet\n\nclass SecureConfig:\n    \"\"\"Encrypted configuration storage\"\"\"\n\n    def __init__(self):\n        # Get encryption key from environment\n        key = os.getenv('ENCRYPTION_KEY')\n        if not key:\n            raise ValueError(\"ENCRYPTION_KEY not set\")\n\n        self.cipher = Fernet(key.encode())\n\n    def encrypt(self, data: str) -&gt; str:\n        \"\"\"Encrypt sensitive data\"\"\"\n        return self.cipher.encrypt(data.encode()).decode()\n\n    def decrypt(self, encrypted: str) -&gt; str:\n        \"\"\"Decrypt sensitive data\"\"\"\n        return self.cipher.decrypt(encrypted.encode()).decode()\n\n# Usage\nconfig = SecureConfig()\n\n# Encrypt API keys before storage\nencrypted_key = config.encrypt(api_key)\nsave_to_database(encrypted_key)\n\n# Decrypt when needed\napi_key = config.decrypt(encrypted_key)\n</code></pre>"},{"location":"advanced/security/#2-logging-security","title":"2. Logging Security","text":"<pre><code>import logging\nimport re\n\nclass SecureFormatter(logging.Formatter):\n    \"\"\"Formatter that redacts sensitive information\"\"\"\n\n    PATTERNS = [\n        (r'Bearer\\s+[A-Za-z0-9\\-_=]+\\.[A-Za-z0-9\\-_=]+\\.[A-Za-z0-9\\-_=]+', 'Bearer [REDACTED]'),\n        (r'\"password\"\\s*:\\s*\"[^\"]*\"', '\"password\": \"[REDACTED]\"'),\n        (r'\"token\"\\s*:\\s*\"[^\"]*\"', '\"token\": \"[REDACTED]\"'),\n        (r'api_key=[A-Za-z0-9]+', 'api_key=[REDACTED]'),\n    ]\n\n    def format(self, record):\n        message = super().format(record)\n\n        # Redact sensitive patterns\n        for pattern, replacement in self.PATTERNS:\n            message = re.sub(pattern, replacement, message)\n\n        return message\n\n# Configure logging\nhandler = logging.StreamHandler()\nhandler.setFormatter(SecureFormatter())\n\nlogger = logging.getLogger('api')\nlogger.addHandler(handler)\n\n# Safe logging\nlogger.info(f\"Request: Authorization: Bearer {token}\")\n# Output: \"Request: Authorization: Bearer [REDACTED]\"\n</code></pre>"},{"location":"advanced/security/#3-database-security","title":"3. Database Security","text":"<pre><code>from motor.motor_asyncio import AsyncIOMotorClient\nfrom pymongo.encryption_options import AutoEncryptionOpts\n\nclass SecureMongoClient:\n    \"\"\"MongoDB client with encryption\"\"\"\n\n    def __init__(self):\n        # Client-side field level encryption\n        kms_providers = {\n            \"local\": {\n                \"key\": os.getenv(\"MONGO_ENCRYPTION_KEY\").encode()\n            }\n        }\n\n        auto_encryption_opts = AutoEncryptionOpts(\n            kms_providers=kms_providers,\n            key_vault_namespace=\"encryption.__keyVault\"\n        )\n\n        self.client = AsyncIOMotorClient(\n            os.getenv(\"MONGO_URI\"),\n            auto_encryption_opts=auto_encryption_opts\n        )\n\n    async def store_sensitive_data(self, collection: str, data: dict):\n        \"\"\"Store data with automatic encryption\"\"\"\n        db = self.client[os.getenv(\"DB_NAME\")]\n        return await db[collection].insert_one(data)\n</code></pre>"},{"location":"advanced/security/#network-security","title":"Network Security","text":""},{"location":"advanced/security/#1-certificate-validation","title":"1. Certificate Validation","text":"<pre><code>import httpx\nimport certifi\n\n# Always verify SSL certificates\nclient = httpx.AsyncClient(verify=certifi.where())\n\n# Don't disable verification in production!\n# client = httpx.AsyncClient(verify=False)  # \u274c NEVER DO THIS\n</code></pre>"},{"location":"advanced/security/#2-request-signing","title":"2. Request Signing","text":"<pre><code>import hmac\nimport hashlib\nimport time\n\ndef sign_request(payload: str, secret: str) -&gt; str:\n    \"\"\"Sign request payload\"\"\"\n    timestamp = str(int(time.time()))\n    message = f\"{timestamp}.{payload}\"\n\n    signature = hmac.new(\n        secret.encode(),\n        message.encode(),\n        hashlib.sha256\n    ).hexdigest()\n\n    return f\"{timestamp}.{signature}\"\n\ndef verify_signature(payload: str, signature: str, secret: str) -&gt; bool:\n    \"\"\"Verify request signature\"\"\"\n    try:\n        timestamp, sig = signature.split('.')\n\n        # Check timestamp (prevent replay attacks)\n        if abs(int(time.time()) - int(timestamp)) &gt; 300:  # 5 minutes\n            return False\n\n        # Verify signature\n        expected = sign_request(payload, secret).split('.')[1]\n        return hmac.compare_digest(sig, expected)\n\n    except Exception:\n        return False\n</code></pre>"},{"location":"advanced/security/#3-ip-whitelisting","title":"3. IP Whitelisting","text":"<pre><code>from fastapi import Request, HTTPException\nimport ipaddress\n\nALLOWED_IP_RANGES = [\n    ipaddress.ip_network('192.168.1.0/24'),\n    ipaddress.ip_network('10.0.0.0/8'),\n]\n\nasync def check_ip_whitelist(request: Request):\n    \"\"\"Middleware to check IP whitelist\"\"\"\n    client_ip = ipaddress.ip_address(request.client.host)\n\n    allowed = any(\n        client_ip in network\n        for network in ALLOWED_IP_RANGES\n    )\n\n    if not allowed:\n        raise HTTPException(\n            status_code=403,\n            detail=\"IP address not allowed\"\n        )\n</code></pre>"},{"location":"advanced/security/#monitoring-and-auditing","title":"Monitoring and Auditing","text":""},{"location":"advanced/security/#1-security-event-logging","title":"1. Security Event Logging","text":"<pre><code>import logging\nfrom datetime import datetime\n\nclass SecurityLogger:\n    \"\"\"Log security-relevant events\"\"\"\n\n    def __init__(self):\n        self.logger = logging.getLogger('security')\n\n    def log_authentication(self, user_id: str, success: bool, ip: str):\n        \"\"\"Log authentication attempt\"\"\"\n        self.logger.info({\n            'event': 'authentication',\n            'user_id': user_id,\n            'success': success,\n            'ip': ip,\n            'timestamp': datetime.utcnow().isoformat()\n        })\n\n    def log_permission_denied(self, user_id: str, resource: str, action: str):\n        \"\"\"Log permission denial\"\"\"\n        self.logger.warning({\n            'event': 'permission_denied',\n            'user_id': user_id,\n            'resource': resource,\n            'action': action,\n            'timestamp': datetime.utcnow().isoformat()\n        })\n\n    def log_suspicious_activity(self, user_id: str, description: str):\n        \"\"\"Log suspicious activity\"\"\"\n        self.logger.error({\n            'event': 'suspicious_activity',\n            'user_id': user_id,\n            'description': description,\n            'timestamp': datetime.utcnow().isoformat()\n        })\n</code></pre>"},{"location":"advanced/security/#2-failed-login-detection","title":"2. Failed Login Detection","text":"<pre><code>from collections import defaultdict\nfrom datetime import datetime, timedelta\n\nclass LoginMonitor:\n    \"\"\"Detect brute force attacks\"\"\"\n\n    def __init__(self, max_attempts: int = 5, window_minutes: int = 15):\n        self.max_attempts = max_attempts\n        self.window = timedelta(minutes=window_minutes)\n        self.attempts = defaultdict(list)\n\n    def record_failed_login(self, username: str, ip: str):\n        \"\"\"Record failed login attempt\"\"\"\n        key = f\"{username}:{ip}\"\n        self.attempts[key].append(datetime.utcnow())\n\n        # Clean old attempts\n        cutoff = datetime.utcnow() - self.window\n        self.attempts[key] = [\n            t for t in self.attempts[key]\n            if t &gt; cutoff\n        ]\n\n        # Check if locked out\n        if len(self.attempts[key]) &gt;= self.max_attempts:\n            return True  # Account locked\n\n        return False\n\n    def clear_attempts(self, username: str, ip: str):\n        \"\"\"Clear attempts after successful login\"\"\"\n        key = f\"{username}:{ip}\"\n        if key in self.attempts:\n            del self.attempts[key]\n</code></pre>"},{"location":"advanced/security/#compliance","title":"Compliance","text":""},{"location":"advanced/security/#1-gdpr-considerations","title":"1. GDPR Considerations","text":"<pre><code>class GDPRCompliance:\n    \"\"\"GDPR compliance utilities\"\"\"\n\n    async def export_user_data(self, user_id: str) -&gt; dict:\n        \"\"\"Export all user data (GDPR right to data portability)\"\"\"\n        return {\n            'user': await self.get_user(user_id),\n            'widgets': await self.get_user_widgets(user_id),\n            'projects': await self.get_user_projects(user_id),\n            'activity_log': await self.get_user_activity(user_id)\n        }\n\n    async def delete_user_data(self, user_id: str):\n        \"\"\"Delete all user data (GDPR right to erasure)\"\"\"\n        # Delete user data\n        await self.delete_user(user_id)\n        await self.delete_user_widgets(user_id)\n        await self.delete_user_projects(user_id)\n\n        # Anonymize logs (keep for legal reasons)\n        await self.anonymize_user_logs(user_id)\n</code></pre>"},{"location":"advanced/security/#2-data-retention","title":"2. Data Retention","text":"<pre><code>from datetime import datetime, timedelta\n\nclass DataRetentionPolicy:\n    \"\"\"Implement data retention policies\"\"\"\n\n    RETENTION_PERIODS = {\n        'access_logs': timedelta(days=90),\n        'audit_logs': timedelta(days=365),\n        'user_data': None,  # Keep until deleted\n    }\n\n    async def cleanup_old_data(self):\n        \"\"\"Remove data past retention period\"\"\"\n        now = datetime.utcnow()\n\n        for data_type, retention in self.RETENTION_PERIODS.items():\n            if retention:\n                cutoff = now - retention\n                await self.delete_data_before(data_type, cutoff)\n</code></pre>"},{"location":"advanced/security/#security-checklist","title":"Security Checklist","text":"<p>Use this checklist before deploying:</p> <ul> <li>[ ] All tokens stored securely (environment variables, encrypted storage)</li> <li>[ ] HTTPS enforced for all API requests</li> <li>[ ] SSL certificate verification enabled</li> <li>[ ] Input validation on all user inputs</li> <li>[ ] Rate limiting implemented</li> <li>[ ] Retry logic with exponential backoff</li> <li>[ ] User code executed in sandbox</li> <li>[ ] Forbidden modules blocked</li> <li>[ ] Execution timeouts configured</li> <li>[ ] Sensitive data encrypted at rest</li> <li>[ ] Logs redact sensitive information</li> <li>[ ] Failed login detection active</li> <li>[ ] Security events logged</li> <li>[ ] IP whitelisting configured (if applicable)</li> <li>[ ] GDPR compliance measures implemented</li> <li>[ ] Data retention policies configured</li> <li>[ ] Regular security audits scheduled</li> </ul>"},{"location":"advanced/security/#resources","title":"Resources","text":"<ul> <li>OWASP Top 10</li> <li>OAuth 2.0 Security Best Practices</li> <li>Python Security Best Practices</li> </ul>"},{"location":"advanced/security/#next-steps","title":"Next Steps","text":"<ul> <li>OAuth2 Scopes - Scope management</li> <li>Custom Endpoints - Dynamic endpoints</li> <li>Authentication API - Authentication endpoints</li> </ul>"},{"location":"api/authentication/","title":"Authentication API Reference","text":"<p>OAuth2 authentication endpoints for the Lazi Public API.</p>"},{"location":"api/authentication/#overview","title":"Overview","text":"<p>The Lazi API uses OAuth2 with JWT tokens for authentication. All API requests require a valid access token.</p> <p>Base Path: <code>/public/oauth</code></p>"},{"location":"api/authentication/#endpoints","title":"Endpoints","text":""},{"location":"api/authentication/#request-access-token","title":"Request Access Token","text":"<p>Obtain an access token using username and password.</p> <pre><code>POST /oauth/token\n</code></pre>"},{"location":"api/authentication/#request","title":"Request","text":"<p>Content-Type: <code>application/x-www-form-urlencoded</code></p> <p>Parameters:</p> Field Type Required Description <code>username</code> string Yes User's username <code>password</code> string Yes User's password <code>grant_type</code> string Yes Must be \"password\" <code>scope</code> string No Space-separated list of scopes <p>Scopes: See OAuth2 Scopes for complete list.</p>"},{"location":"api/authentication/#example-request","title":"Example Request","text":"<pre><code>curl -X POST https://api.lazi.app/public/oauth/token \\\n  -H \"Content-Type: application/x-www-form-urlencoded\" \\\n  -d \"username=john@example.com\" \\\n  -d \"password=secure_password_123\" \\\n  -d \"grant_type=password\" \\\n  -d \"scope=widgets:read widgets:write projects:read\"\n</code></pre> <p>Python Example:</p> <pre><code>import httpx\n\nasync def get_access_token():\n    url = \"https://api.lazi.app/public/oauth/token\"\n\n    data = {\n        \"username\": \"john@example.com\",\n        \"password\": \"secure_password_123\",\n        \"grant_type\": \"password\",\n        \"scope\": \"widgets:read widgets:write projects:read\"\n    }\n\n    async with httpx.AsyncClient() as client:\n        response = await client.post(url, data=data)\n        return response.json()\n</code></pre>"},{"location":"api/authentication/#response","title":"Response","text":"<p>Status: <code>200 OK</code></p> <pre><code>{\n  \"access_token\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyXzEyM2FiYyIsInNjb3BlcyI6WyJ3aWRnZXRzOnJlYWQiLCJ3aWRnZXRzOndyaXRlIiwicHJvamVjdHM6cmVhZCJdLCJleHAiOjE3MDY3MDYwMDB9.signature\",\n  \"refresh_token\": \"rt_abc123def456ghi789jkl012mno345pqr678\",\n  \"token_type\": \"bearer\",\n  \"expires_in\": 3600,\n  \"scope\": \"widgets:read widgets:write projects:read\",\n  \"user_id\": \"user_123abc\"\n}\n</code></pre> <p>Response Fields:</p> Field Type Description <code>access_token</code> string JWT access token (valid for 1 hour) <code>refresh_token</code> string Refresh token (valid for 30 days) <code>token_type</code> string Always \"bearer\" <code>expires_in</code> integer Token expiration in seconds (3600) <code>scope</code> string Granted scopes <code>user_id</code> string User's unique identifier"},{"location":"api/authentication/#error-responses","title":"Error Responses","text":"<p>401 Unauthorized - Invalid credentials</p> <pre><code>{\n  \"detail\": \"Invalid username or password\",\n  \"error_code\": \"INVALID_CREDENTIALS\"\n}\n</code></pre> <p>422 Unprocessable Entity - Missing required fields</p> <pre><code>{\n  \"detail\": [\n    {\n      \"loc\": [\"body\", \"username\"],\n      \"msg\": \"field required\",\n      \"type\": \"value_error.missing\"\n    }\n  ]\n}\n</code></pre>"},{"location":"api/authentication/#refresh-token","title":"Refresh Token","text":"<p>Exchange a refresh token for a new access token.</p> <pre><code>POST /oauth/token/refresh\n</code></pre>"},{"location":"api/authentication/#request_1","title":"Request","text":"<p>Content-Type: <code>application/json</code></p> <p>Body:</p> <pre><code>{\n  \"refresh_token\": \"rt_abc123def456ghi789jkl012mno345pqr678\"\n}\n</code></pre>"},{"location":"api/authentication/#example-request_1","title":"Example Request","text":"<pre><code>curl -X POST https://api.lazi.app/public/oauth/token/refresh \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"refresh_token\": \"rt_abc123def456ghi789jkl012mno345pqr678\"\n  }'\n</code></pre> <p>Python Example:</p> <pre><code>import httpx\n\nasync def refresh_access_token(refresh_token: str):\n    url = \"https://api.lazi.app/public/oauth/token/refresh\"\n\n    async with httpx.AsyncClient() as client:\n        response = await client.post(\n            url,\n            json={\"refresh_token\": refresh_token}\n        )\n        return response.json()\n</code></pre>"},{"location":"api/authentication/#response_1","title":"Response","text":"<p>Status: <code>200 OK</code></p> <pre><code>{\n  \"access_token\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.new_token_payload.signature\",\n  \"refresh_token\": \"rt_new123xyz456abc789def012ghi345jkl678\",\n  \"token_type\": \"bearer\",\n  \"expires_in\": 3600,\n  \"scope\": \"widgets:read widgets:write projects:read\",\n  \"user_id\": \"user_123abc\"\n}\n</code></pre>"},{"location":"api/authentication/#error-responses_1","title":"Error Responses","text":"<p>401 Unauthorized - Invalid or expired refresh token</p> <pre><code>{\n  \"detail\": \"Invalid or expired refresh token\",\n  \"error_code\": \"INVALID_REFRESH_TOKEN\"\n}\n</code></pre>"},{"location":"api/authentication/#revoke-token","title":"Revoke Token","text":"<p>Revoke an access or refresh token.</p> <pre><code>POST /oauth/revoke\n</code></pre>"},{"location":"api/authentication/#request_2","title":"Request","text":"<p>Content-Type: <code>application/json</code></p> <p>Headers:</p> <pre><code>Authorization: Bearer YOUR_ACCESS_TOKEN\n</code></pre> <p>Body:</p> <pre><code>{\n  \"token\": \"rt_abc123def456ghi789jkl012mno345pqr678\",\n  \"token_type_hint\": \"refresh_token\"\n}\n</code></pre> <p>Fields:</p> Field Type Required Description <code>token</code> string Yes Token to revoke <code>token_type_hint</code> string No \"access_token\" or \"refresh_token\""},{"location":"api/authentication/#example-request_2","title":"Example Request","text":"<pre><code>curl -X POST https://api.lazi.app/public/oauth/revoke \\\n  -H \"Authorization: Bearer eyJhbGci...\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"token\": \"rt_abc123...\",\n    \"token_type_hint\": \"refresh_token\"\n  }'\n</code></pre> <p>Python Example:</p> <pre><code>import httpx\n\nasync def revoke_token(access_token: str, refresh_token: str):\n    url = \"https://api.lazi.app/public/oauth/revoke\"\n\n    headers = {\"Authorization\": f\"Bearer {access_token}\"}\n\n    async with httpx.AsyncClient() as client:\n        response = await client.post(\n            url,\n            headers=headers,\n            json={\n                \"token\": refresh_token,\n                \"token_type_hint\": \"refresh_token\"\n            }\n        )\n        return response.status_code == 200\n</code></pre>"},{"location":"api/authentication/#response_2","title":"Response","text":"<p>Status: <code>200 OK</code></p> <pre><code>{\n  \"message\": \"Token revoked successfully\"\n}\n</code></pre>"},{"location":"api/authentication/#error-responses_2","title":"Error Responses","text":"<p>401 Unauthorized - Missing or invalid authorization</p> <pre><code>{\n  \"detail\": \"Not authenticated\"\n}\n</code></pre>"},{"location":"api/authentication/#token-storage","title":"Token Storage","text":""},{"location":"api/authentication/#best-practices","title":"Best Practices","text":"<ol> <li>Store Securely: Never store tokens in:</li> <li>Local storage (vulnerable to XSS)</li> <li>URL parameters</li> <li>Unencrypted files</li> <li> <p>Version control</p> </li> <li> <p>Use Secure Storage:</p> </li> <li>Environment variables</li> <li>Encrypted key stores</li> <li>Secure credential managers</li> <li> <p>HTTP-only cookies (for web apps)</p> </li> <li> <p>Token Rotation:</p> </li> <li>Refresh tokens before they expire</li> <li>Implement automatic token refresh</li> <li>Handle token refresh failures gracefully</li> </ol>"},{"location":"api/authentication/#example-token-manager","title":"Example: Token Manager","text":"<pre><code>import os\nimport json\nfrom datetime import datetime, timedelta\nfrom pathlib import Path\n\nclass TokenManager:\n    \"\"\"Secure token storage and management\"\"\"\n\n    def __init__(self, token_file: str = \".lazi_tokens\"):\n        self.token_file = Path.home() / token_file\n        self.tokens = self._load_tokens()\n\n    def _load_tokens(self) -&gt; dict:\n        \"\"\"Load tokens from encrypted file\"\"\"\n        if not self.token_file.exists():\n            return {}\n\n        # In production, use encryption\n        with open(self.token_file, 'r') as f:\n            return json.load(f)\n\n    def _save_tokens(self):\n        \"\"\"Save tokens to encrypted file\"\"\"\n        # Set restrictive permissions\n        self.token_file.touch(mode=0o600)\n\n        with open(self.token_file, 'w') as f:\n            json.dump(self.tokens, f)\n\n    def store_tokens(self, access_token: str, refresh_token: str, \n                    expires_in: int):\n        \"\"\"Store tokens with expiration\"\"\"\n        self.tokens = {\n            'access_token': access_token,\n            'refresh_token': refresh_token,\n            'expires_at': (\n                datetime.utcnow() + timedelta(seconds=expires_in)\n            ).isoformat()\n        }\n        self._save_tokens()\n\n    def get_access_token(self) -&gt; str | None:\n        \"\"\"Get valid access token\"\"\"\n        if not self.tokens:\n            return None\n\n        expires_at = datetime.fromisoformat(\n            self.tokens['expires_at']\n        )\n\n        if datetime.utcnow() &gt;= expires_at:\n            return None  # Token expired\n\n        return self.tokens['access_token']\n\n    def get_refresh_token(self) -&gt; str | None:\n        \"\"\"Get refresh token\"\"\"\n        return self.tokens.get('refresh_token')\n\n    def clear_tokens(self):\n        \"\"\"Clear stored tokens\"\"\"\n        self.tokens = {}\n        if self.token_file.exists():\n            self.token_file.unlink()\n</code></pre>"},{"location":"api/authentication/#oauth2-scopes","title":"OAuth2 Scopes","text":""},{"location":"api/authentication/#available-scopes","title":"Available Scopes","text":"Scope Description <code>widgets:read</code> Read widget data <code>widgets:write</code> Create and update widgets <code>widgets:delete</code> Delete widgets <code>widgets:admin</code> Full widget management <code>projects:read</code> Read project data <code>projects:write</code> Create and update projects <code>projects:delete</code> Delete projects <code>projects:admin</code> Full project management <code>files:read</code> Read file metadata <code>files:write</code> Upload files <code>files:delete</code> Delete files"},{"location":"api/authentication/#scope-hierarchies","title":"Scope Hierarchies","text":"<p>Admin scopes include all lower permissions:</p> <ul> <li><code>widgets:admin</code> \u2192 <code>widgets:delete</code> \u2192 <code>widgets:write</code> \u2192 <code>widgets:read</code></li> <li><code>projects:admin</code> \u2192 <code>projects:delete</code> \u2192 <code>projects:write</code> \u2192 <code>projects:read</code></li> <li><code>files:admin</code> \u2192 <code>files:delete</code> \u2192 <code>files:write</code> \u2192 <code>files:read</code></li> </ul>"},{"location":"api/authentication/#requesting-scopes","title":"Requesting Scopes","text":"<p>Request minimum required scopes:</p> <pre><code># \u2705 Good - minimal scopes\nscopes = \"widgets:read projects:read\"\n\n# \u274c Bad - excessive permissions\nscopes = \"widgets:admin projects:admin files:admin\"\n</code></pre>"},{"location":"api/authentication/#security-considerations","title":"Security Considerations","text":""},{"location":"api/authentication/#token-expiration","title":"Token Expiration","text":"<ul> <li>Access tokens: 1 hour</li> <li>Refresh tokens: 30 days</li> <li>Revoked tokens: Immediately invalid</li> </ul>"},{"location":"api/authentication/#rate-limiting","title":"Rate Limiting","text":"<p>Token endpoints have strict rate limits:</p> <ul> <li>Token requests: 10 per hour per IP</li> <li>Token refresh: 100 per hour per user</li> <li>Token revoke: 50 per hour per user</li> </ul>"},{"location":"api/authentication/#ip-whitelisting","title":"IP Whitelisting","text":"<p>Configure IP whitelisting for enhanced security:</p> <pre><code># In your environment\nALLOWED_IPS = \"192.168.1.0/24,10.0.0.0/8\"\n</code></pre>"},{"location":"api/authentication/#monitoring","title":"Monitoring","text":"<p>Monitor token usage:</p> <ul> <li>Failed authentication attempts</li> <li>Token refresh patterns</li> <li>Unusual access patterns</li> <li>Token revocations</li> </ul>"},{"location":"api/authentication/#next-steps","title":"Next Steps","text":"<ul> <li>Widget API - Manage widgets</li> <li>OAuth2 Scopes - Complete scope reference</li> <li>Security Best Practices - Security guidelines</li> </ul>"},{"location":"api/overview/","title":"API Reference Overview","text":"<p>Complete reference for the Lazi Public API.</p>"},{"location":"api/overview/#base-url","title":"Base URL","text":"<pre><code>https://api.lazi.app/public\n</code></pre> <p>For development:</p> <pre><code>http://localhost:8000/public\n</code></pre>"},{"location":"api/overview/#authentication","title":"Authentication","text":"<p>All API endpoints require OAuth2 authentication. Include your access token in the <code>Authorization</code> header:</p> <pre><code>Authorization: Bearer YOUR_ACCESS_TOKEN\n</code></pre> <p>See Authentication Reference for detailed endpoint documentation.</p>"},{"location":"api/overview/#api-versioning","title":"API Versioning","text":"<p>The API uses URL-based versioning:</p> <ul> <li>Current Version: v1 (implicit, no version prefix required)</li> <li>Future Versions: Will be available at <code>/public/v2</code>, etc.</li> </ul>"},{"location":"api/overview/#content-types","title":"Content Types","text":""},{"location":"api/overview/#request-content-types","title":"Request Content Types","text":"<ul> <li><code>application/json</code> - For JSON request bodies</li> <li><code>multipart/form-data</code> - For file uploads</li> <li><code>application/x-www-form-urlencoded</code> - For OAuth2 token requests</li> </ul>"},{"location":"api/overview/#response-content-types","title":"Response Content Types","text":"<p>All API responses return <code>application/json</code> unless otherwise specified.</p>"},{"location":"api/overview/#response-format","title":"Response Format","text":""},{"location":"api/overview/#success-response","title":"Success Response","text":"<pre><code>{\n  \"success\": true,\n  \"data\": {\n    // Response data\n  },\n  \"metadata\": {\n    \"timestamp\": \"2024-01-31T12:00:00Z\",\n    \"request_id\": \"req_123abc\"\n  }\n}\n</code></pre>"},{"location":"api/overview/#error-response","title":"Error Response","text":"<pre><code>{\n  \"detail\": \"Error message description\",\n  \"error_code\": \"INVALID_TOKEN\",\n  \"status_code\": 401\n}\n</code></pre>"},{"location":"api/overview/#common-http-status-codes","title":"Common HTTP Status Codes","text":"Code Meaning Description <code>200</code> OK Request succeeded <code>201</code> Created Resource created successfully <code>204</code> No Content Request succeeded, no content returned <code>400</code> Bad Request Invalid request parameters <code>401</code> Unauthorized Missing or invalid authentication <code>403</code> Forbidden Insufficient permissions <code>404</code> Not Found Resource doesn't exist <code>409</code> Conflict Resource conflict (e.g., duplicate) <code>422</code> Unprocessable Entity Validation error <code>429</code> Too Many Requests Rate limit exceeded <code>500</code> Internal Server Error Server error <code>503</code> Service Unavailable Temporary outage"},{"location":"api/overview/#rate-limiting","title":"Rate Limiting","text":""},{"location":"api/overview/#limits","title":"Limits","text":"<ul> <li>Standard: 1000 requests per hour</li> <li>Widgets:write: 100 widget creations per hour</li> <li>Files: 50 file uploads per hour</li> </ul>"},{"location":"api/overview/#rate-limit-headers","title":"Rate Limit Headers","text":"<pre><code>X-RateLimit-Limit: 1000\nX-RateLimit-Remaining: 987\nX-RateLimit-Reset: 1706702400\n</code></pre>"},{"location":"api/overview/#rate-limit-exceeded-response","title":"Rate Limit Exceeded Response","text":"<pre><code>{\n  \"detail\": \"Rate limit exceeded\",\n  \"error_code\": \"RATE_LIMIT_EXCEEDED\",\n  \"status_code\": 429,\n  \"retry_after\": 3600\n}\n</code></pre>"},{"location":"api/overview/#pagination","title":"Pagination","text":"<p>For endpoints that return lists, pagination is available:</p>"},{"location":"api/overview/#request-parameters","title":"Request Parameters","text":"<pre><code>?page=1&amp;per_page=50\n</code></pre> <ul> <li><code>page</code> - Page number (default: 1)</li> <li><code>per_page</code> - Items per page (default: 20, max: 100)</li> </ul>"},{"location":"api/overview/#response-format_1","title":"Response Format","text":"<pre><code>{\n  \"data\": [...],\n  \"pagination\": {\n    \"page\": 1,\n    \"per_page\": 20,\n    \"total_items\": 156,\n    \"total_pages\": 8,\n    \"has_next\": true,\n    \"has_previous\": false\n  }\n}\n</code></pre>"},{"location":"api/overview/#filtering-and-sorting","title":"Filtering and Sorting","text":""},{"location":"api/overview/#filtering","title":"Filtering","text":"<p>Use query parameters to filter results:</p> <pre><code>GET /widgets?project_id=proj_123&amp;size=medium\n</code></pre>"},{"location":"api/overview/#sorting","title":"Sorting","text":"<p>Sort results using the <code>sort</code> parameter:</p> <pre><code>GET /widgets?sort=created_at:desc\n</code></pre> <ul> <li>Format: <code>field:order</code></li> <li>Order: <code>asc</code> (ascending) or <code>desc</code> (descending)</li> <li>Multiple sorts: <code>sort=created_at:desc,name:asc</code></li> </ul>"},{"location":"api/overview/#timestamps","title":"Timestamps","text":"<p>All timestamps use ISO 8601 format with UTC timezone:</p> <pre><code>2024-01-31T12:00:00.000Z\n</code></pre>"},{"location":"api/overview/#idempotency","title":"Idempotency","text":"<p>For safe retry of requests, use the <code>Idempotency-Key</code> header:</p> <pre><code>POST /widgets\nIdempotency-Key: unique-request-id-12345\n</code></pre> <p>The same <code>Idempotency-Key</code> within 24 hours will return the cached response instead of creating a duplicate resource.</p>"},{"location":"api/overview/#cors","title":"CORS","text":"<p>Cross-Origin Resource Sharing (CORS) is enabled for all origins in development. In production, configure allowed origins via environment variables.</p>"},{"location":"api/overview/#cors-headers","title":"CORS Headers","text":"<pre><code>Access-Control-Allow-Origin: *\nAccess-Control-Allow-Methods: GET, POST, PUT, PATCH, DELETE, OPTIONS\nAccess-Control-Allow-Headers: Authorization, Content-Type, Idempotency-Key\nAccess-Control-Max-Age: 3600\n</code></pre>"},{"location":"api/overview/#webhooks","title":"Webhooks","text":"<p>Configure webhooks to receive real-time notifications:</p>"},{"location":"api/overview/#events","title":"Events","text":"<ul> <li><code>widget.created</code></li> <li><code>widget.updated</code></li> <li><code>widget.deleted</code></li> <li><code>widget.interaction</code></li> <li><code>project.created</code></li> <li><code>project.updated</code></li> </ul>"},{"location":"api/overview/#webhook-payload","title":"Webhook Payload","text":"<pre><code>{\n  \"event\": \"widget.created\",\n  \"timestamp\": \"2024-01-31T12:00:00Z\",\n  \"data\": {\n    \"widget_id\": \"widget_123abc\",\n    \"project_id\": \"proj_456def\",\n    \"user_id\": \"user_789ghi\"\n  }\n}\n</code></pre>"},{"location":"api/overview/#webhook-signature","title":"Webhook Signature","text":"<p>Verify webhook authenticity using the <code>X-Lazi-Signature</code> header:</p> <pre><code>import hmac\nimport hashlib\n\ndef verify_webhook(payload, signature, secret):\n    expected = hmac.new(\n        secret.encode(),\n        payload.encode(),\n        hashlib.sha256\n    ).hexdigest()\n    return hmac.compare_digest(expected, signature)\n</code></pre>"},{"location":"api/overview/#sdk-support","title":"SDK Support","text":"<p>Official SDKs are available for:</p> <ul> <li>Python: <code>pip install lazi-sdk</code></li> <li>JavaScript/TypeScript: <code>npm install @lazi/sdk</code> (coming soon)</li> <li>Go: <code>go get github.com/lazi/go-sdk</code> (coming soon)</li> </ul>"},{"location":"api/overview/#api-endpoints","title":"API Endpoints","text":""},{"location":"api/overview/#authentication_1","title":"Authentication","text":"<ul> <li>POST /oauth/token - Request access token</li> <li>POST /oauth/token/refresh - Refresh access token</li> <li>POST /oauth/revoke - Revoke token</li> </ul>"},{"location":"api/overview/#widgets","title":"Widgets","text":"<ul> <li>GET /widgets - List widgets</li> <li>GET /widgets/{id} - Get widget details</li> <li>POST /widgets - Create widget</li> <li>PATCH /widgets/{id} - Update widget</li> <li>DELETE /widgets/{id} - Delete widget</li> <li>POST /widgets/{id}/media - Attach media</li> <li>POST /widgets/{id}/interact - Record interaction</li> </ul>"},{"location":"api/overview/#projects","title":"Projects","text":"<ul> <li>GET /projects - List projects</li> <li>GET /projects/{id} - Get project details</li> <li>POST /projects - Create project</li> <li>PATCH /projects/{id} - Update project</li> <li>DELETE /projects/{id} - Delete project</li> <li>GET /projects/{id}/widgets - List project widgets</li> </ul>"},{"location":"api/overview/#example-complete-request","title":"Example: Complete Request","text":"<pre><code>curl -X POST https://api.lazi.app/public/widgets \\\n  -H \"Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...\" \\\n  -H \"Content-Type: application/json\" \\\n  -H \"Idempotency-Key: req-123abc-456def\" \\\n  -d '{\n    \"name\": \"Sales Dashboard\",\n    \"description\": \"Real-time sales metrics\",\n    \"size\": \"large\",\n    \"project_id\": \"proj_123abc\",\n    \"endpoint\": \"https://api.example.com/sales\",\n    \"endpoint_data\": {\n      \"refresh_interval\": 300,\n      \"logic\": \"def process_data(data, req, user): return data\"\n    }\n  }'\n</code></pre>"},{"location":"api/overview/#support","title":"Support","text":"<ul> <li>Documentation: https://docs.lazi.app</li> <li>GitHub: https://github.com/Jacey1225/personal-manager-02</li> <li>Issues: GitHub Issues</li> </ul>"},{"location":"api/overview/#changelog","title":"Changelog","text":"<p>Track API changes and deprecations:</p> <ul> <li>2024-01-31: Initial public API release (v1)</li> <li>OAuth2 with scopes</li> <li>Widget management endpoints</li> <li>Project management endpoints</li> <li>File upload support</li> </ul>"},{"location":"api/projects/","title":"Projects API Reference","text":"<p>Project management endpoints for the Lazi Public API.</p>"},{"location":"api/projects/#overview","title":"Overview","text":"<p>Projects are containers for organizing widgets, pages, and team members. Each project can have multiple widgets and can be public or private.</p> <p>Base Path: <code>/public/projects</code></p> <p>Required Scopes:  - <code>projects:read</code> - Read project data - <code>projects:write</code> - Create/update projects - <code>projects:delete</code> - Delete projects</p>"},{"location":"api/projects/#endpoints","title":"Endpoints","text":""},{"location":"api/projects/#list-projects","title":"List Projects","text":"<p>Retrieve a list of projects accessible to the authenticated user.</p> <pre><code>GET /projects\n</code></pre>"},{"location":"api/projects/#request","title":"Request","text":"<p>Headers:</p> <pre><code>Authorization: Bearer YOUR_ACCESS_TOKEN\n</code></pre> <p>Query Parameters:</p> Parameter Type Required Description <code>page</code> integer No Page number (default: 1) <code>per_page</code> integer No Items per page (default: 20, max: 100) <code>transparency</code> boolean No Filter by visibility: true (public), false (private) <code>organization_id</code> string No Filter by organization <code>sort</code> string No Sort field and order (e.g., \"created_at:desc\")"},{"location":"api/projects/#example-request","title":"Example Request","text":"<pre><code>curl -X GET \"https://api.lazi.app/public/projects?per_page=10&amp;transparency=true\" \\\n  -H \"Authorization: Bearer eyJhbGciOi...\"\n</code></pre> <p>Python Example:</p> <pre><code>import httpx\n\nasync def list_projects(token: str):\n    url = \"https://api.lazi.app/public/projects\"\n\n    headers = {\"Authorization\": f\"Bearer {token}\"}\n    params = {\"per_page\": 20, \"transparency\": True}\n\n    async with httpx.AsyncClient() as client:\n        response = await client.get(url, headers=headers, params=params)\n        return response.json()\n</code></pre>"},{"location":"api/projects/#response","title":"Response","text":"<p>Status: <code>200 OK</code></p> <pre><code>{\n  \"data\": [\n    {\n      \"project_id\": \"proj_123abc\",\n      \"project_name\": \"Sales Analytics Platform\",\n      \"project_likes\": 42,\n      \"project_transparency\": true,\n      \"project_members\": [\n        \"user_789xyz\",\n        \"user_456def\"\n      ],\n      \"organizations\": [\n        \"org_111aaa\"\n      ],\n      \"created_at\": \"2024-01-15T10:00:00Z\",\n      \"updated_at\": \"2024-01-31T12:00:00Z\",\n      \"widget_count\": 8\n    },\n    {\n      \"project_id\": \"proj_456def\",\n      \"project_name\": \"Internal Dashboard\",\n      \"project_likes\": 15,\n      \"project_transparency\": false,\n      \"project_members\": [\n        \"user_789xyz\"\n      ],\n      \"organizations\": [],\n      \"created_at\": \"2024-01-20T14:30:00Z\",\n      \"updated_at\": \"2024-01-30T09:15:00Z\",\n      \"widget_count\": 3\n    }\n  ],\n  \"pagination\": {\n    \"page\": 1,\n    \"per_page\": 10,\n    \"total_items\": 12,\n    \"total_pages\": 2,\n    \"has_next\": true,\n    \"has_previous\": false\n  }\n}\n</code></pre>"},{"location":"api/projects/#get-project","title":"Get Project","text":"<p>Retrieve details of a specific project.</p> <pre><code>GET /projects/{project_id}\n</code></pre>"},{"location":"api/projects/#request_1","title":"Request","text":"<p>Headers:</p> <pre><code>Authorization: Bearer YOUR_ACCESS_TOKEN\n</code></pre> <p>Path Parameters:</p> Parameter Type Required Description <code>project_id</code> string Yes Project identifier"},{"location":"api/projects/#example-request_1","title":"Example Request","text":"<pre><code>curl -X GET \"https://api.lazi.app/public/projects/proj_123abc\" \\\n  -H \"Authorization: Bearer eyJhbGciOi...\"\n</code></pre> <p>Python Example:</p> <pre><code>import httpx\n\nasync def get_project(token: str, project_id: str):\n    url = f\"https://api.lazi.app/public/projects/{project_id}\"\n\n    headers = {\"Authorization\": f\"Bearer {token}\"}\n\n    async with httpx.AsyncClient() as client:\n        response = await client.get(url, headers=headers)\n        return response.json()\n</code></pre>"},{"location":"api/projects/#response_1","title":"Response","text":"<p>Status: <code>200 OK</code></p> <pre><code>{\n  \"project_id\": \"proj_123abc\",\n  \"project_name\": \"Sales Analytics Platform\",\n  \"project_likes\": 42,\n  \"project_transparency\": true,\n  \"project_members\": [\n    \"user_789xyz\",\n    \"user_456def\",\n    \"user_222bbb\"\n  ],\n  \"organizations\": [\n    \"org_111aaa\"\n  ],\n  \"created_at\": \"2024-01-15T10:00:00Z\",\n  \"updated_at\": \"2024-01-31T12:00:00Z\",\n  \"metadata\": {\n    \"widget_count\": 8,\n    \"total_interactions\": 1250,\n    \"last_activity\": \"2024-01-31T11:45:00Z\"\n  }\n}\n</code></pre>"},{"location":"api/projects/#create-project","title":"Create Project","text":"<p>Create a new project.</p> <pre><code>POST /projects\n</code></pre>"},{"location":"api/projects/#request_2","title":"Request","text":"<p>Headers:</p> <pre><code>Authorization: Bearer YOUR_ACCESS_TOKEN\nContent-Type: application/json\n</code></pre> <p>Required Scope: <code>projects:write</code></p> <p>Body:</p> <pre><code>{\n  \"project_name\": \"Marketing Dashboard\",\n  \"project_transparency\": true,\n  \"project_members\": [\"user_789xyz\"],\n  \"organizations\": [\"org_111aaa\"]\n}\n</code></pre> <p>Request Schema:</p> Field Type Required Description <code>project_name</code> string Yes Project name <code>project_transparency</code> boolean No Public (true) or private (false). Default: true <code>project_members</code> array Yes Array of user IDs (must include creator) <code>organizations</code> array No Array of organization IDs"},{"location":"api/projects/#example-request_2","title":"Example Request","text":"<pre><code>curl -X POST \"https://api.lazi.app/public/projects\" \\\n  -H \"Authorization: Bearer eyJhbGciOi...\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"project_name\": \"Marketing Dashboard\",\n    \"project_transparency\": true,\n    \"project_members\": [\"user_789xyz\"],\n    \"organizations\": []\n  }'\n</code></pre> <p>Python Example:</p> <pre><code>import httpx\n\nasync def create_project(token: str, user_id: str):\n    url = \"https://api.lazi.app/public/projects\"\n\n    headers = {\n        \"Authorization\": f\"Bearer {token}\",\n        \"Content-Type\": \"application/json\"\n    }\n\n    data = {\n        \"project_name\": \"Marketing Dashboard\",\n        \"project_transparency\": True,\n        \"project_members\": [user_id],\n        \"organizations\": []\n    }\n\n    async with httpx.AsyncClient() as client:\n        response = await client.post(url, headers=headers, json=data)\n        return response.json()\n</code></pre>"},{"location":"api/projects/#response_2","title":"Response","text":"<p>Status: <code>201 Created</code></p> <pre><code>{\n  \"project_id\": \"proj_789ghi\",\n  \"project_name\": \"Marketing Dashboard\",\n  \"project_likes\": 0,\n  \"project_transparency\": true,\n  \"project_members\": [\"user_789xyz\"],\n  \"organizations\": [],\n  \"created_at\": \"2024-01-31T12:00:00Z\",\n  \"updated_at\": \"2024-01-31T12:00:00Z\"\n}\n</code></pre>"},{"location":"api/projects/#update-project","title":"Update Project","text":"<p>Update an existing project.</p> <pre><code>PATCH /projects/{project_id}\n</code></pre>"},{"location":"api/projects/#request_3","title":"Request","text":"<p>Headers:</p> <pre><code>Authorization: Bearer YOUR_ACCESS_TOKEN\nContent-Type: application/json\n</code></pre> <p>Required Scope: <code>projects:write</code></p> <p>Path Parameters:</p> Parameter Type Required Description <code>project_id</code> string Yes Project identifier <p>Body: (All fields optional, include only fields to update)</p> <pre><code>{\n  \"project_name\": \"Updated Project Name\",\n  \"project_transparency\": false,\n  \"project_members\": [\"user_789xyz\", \"user_111new\"]\n}\n</code></pre>"},{"location":"api/projects/#example-request_3","title":"Example Request","text":"<pre><code>curl -X PATCH \"https://api.lazi.app/public/projects/proj_123abc\" \\\n  -H \"Authorization: Bearer eyJhbGciOi...\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"project_name\": \"Sales &amp; Marketing Analytics\",\n    \"project_transparency\": false\n  }'\n</code></pre>"},{"location":"api/projects/#response_3","title":"Response","text":"<p>Status: <code>200 OK</code></p> <pre><code>{\n  \"project_id\": \"proj_123abc\",\n  \"project_name\": \"Sales &amp; Marketing Analytics\",\n  \"project_transparency\": false,\n  \"updated_at\": \"2024-01-31T13:00:00Z\"\n}\n</code></pre>"},{"location":"api/projects/#delete-project","title":"Delete Project","text":"<p>Delete a project and all associated widgets.</p> <pre><code>DELETE /projects/{project_id}\n</code></pre>"},{"location":"api/projects/#request_4","title":"Request","text":"<p>Headers:</p> <pre><code>Authorization: Bearer YOUR_ACCESS_TOKEN\n</code></pre> <p>Required Scope: <code>projects:delete</code></p> <p>Path Parameters:</p> Parameter Type Required Description <code>project_id</code> string Yes Project identifier <p>Query Parameters:</p> Parameter Type Required Description <code>confirm</code> boolean Yes Must be true to confirm deletion"},{"location":"api/projects/#example-request_4","title":"Example Request","text":"<pre><code>curl -X DELETE \"https://api.lazi.app/public/projects/proj_123abc?confirm=true\" \\\n  -H \"Authorization: Bearer eyJhbGciOi...\"\n</code></pre> <p>Python Example:</p> <pre><code>import httpx\n\nasync def delete_project(token: str, project_id: str):\n    url = f\"https://api.lazi.app/public/projects/{project_id}\"\n\n    headers = {\"Authorization\": f\"Bearer {token}\"}\n    params = {\"confirm\": True}\n\n    async with httpx.AsyncClient() as client:\n        response = await client.delete(url, headers=headers, params=params)\n        return response.status_code == 204\n</code></pre>"},{"location":"api/projects/#response_4","title":"Response","text":"<p>Status: <code>204 No Content</code></p>"},{"location":"api/projects/#list-project-widgets","title":"List Project Widgets","text":"<p>Retrieve all widgets for a specific project.</p> <pre><code>GET /projects/{project_id}/widgets\n</code></pre>"},{"location":"api/projects/#request_5","title":"Request","text":"<p>Headers:</p> <pre><code>Authorization: Bearer YOUR_ACCESS_TOKEN\n</code></pre> <p>Path Parameters:</p> Parameter Type Required Description <code>project_id</code> string Yes Project identifier <p>Query Parameters:</p> Parameter Type Required Description <code>page</code> integer No Page number (default: 1) <code>per_page</code> integer No Items per page (default: 20, max: 100) <code>size</code> string No Filter by widget size"},{"location":"api/projects/#example-request_5","title":"Example Request","text":"<pre><code>curl -X GET \"https://api.lazi.app/public/projects/proj_123abc/widgets?per_page=50\" \\\n  -H \"Authorization: Bearer eyJhbGciOi...\"\n</code></pre> <p>Python Example:</p> <pre><code>from lazi_sdk import ReadWidget\n\nasync def get_project_widgets():\n    reader = ReadWidget(\n        username=\"john@example.com\",\n        token=\"eyJhbGciOi...\",\n        project_id=\"proj_123abc\"\n    )\n\n    widgets = await reader.list_widgets()\n\n    print(f\"Total widgets: {len(widgets)}\")\n    for widget in widgets:\n        print(f\"- {widget.name} ({widget.size})\")\n</code></pre>"},{"location":"api/projects/#response_5","title":"Response","text":"<p>Status: <code>200 OK</code></p> <pre><code>{\n  \"data\": [\n    {\n      \"id\": \"widget_123abc\",\n      \"name\": \"Sales Dashboard\",\n      \"size\": \"large\",\n      \"created_at\": \"2024-01-20T10:00:00Z\"\n    },\n    {\n      \"id\": \"widget_456def\",\n      \"name\": \"User Analytics\",\n      \"size\": \"medium\",\n      \"created_at\": \"2024-01-22T14:30:00Z\"\n    }\n  ],\n  \"pagination\": {\n    \"page\": 1,\n    \"per_page\": 50,\n    \"total_items\": 8,\n    \"total_pages\": 1\n  }\n}\n</code></pre>"},{"location":"api/projects/#add-project-member","title":"Add Project Member","text":"<p>Add a user to a project.</p> <pre><code>POST /projects/{project_id}/members\n</code></pre>"},{"location":"api/projects/#request_6","title":"Request","text":"<p>Headers:</p> <pre><code>Authorization: Bearer YOUR_ACCESS_TOKEN\nContent-Type: application/json\n</code></pre> <p>Required Scope: <code>projects:write</code></p> <p>Path Parameters:</p> Parameter Type Required Description <code>project_id</code> string Yes Project identifier <p>Body:</p> <pre><code>{\n  \"user_id\": \"user_999zzz\",\n  \"role\": \"contributor\"\n}\n</code></pre> <p>Roles: - <code>owner</code> - Full project control - <code>admin</code> - Manage members and settings - <code>contributor</code> - Create and edit widgets - <code>viewer</code> - Read-only access</p>"},{"location":"api/projects/#example-request_6","title":"Example Request","text":"<pre><code>curl -X POST \"https://api.lazi.app/public/projects/proj_123abc/members\" \\\n  -H \"Authorization: Bearer eyJhbGciOi...\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"user_id\": \"user_999zzz\",\n    \"role\": \"contributor\"\n  }'\n</code></pre>"},{"location":"api/projects/#response_6","title":"Response","text":"<p>Status: <code>200 OK</code></p> <pre><code>{\n  \"message\": \"Member added successfully\",\n  \"project_id\": \"proj_123abc\",\n  \"user_id\": \"user_999zzz\",\n  \"role\": \"contributor\"\n}\n</code></pre>"},{"location":"api/projects/#remove-project-member","title":"Remove Project Member","text":"<p>Remove a user from a project.</p> <pre><code>DELETE /projects/{project_id}/members/{user_id}\n</code></pre>"},{"location":"api/projects/#request_7","title":"Request","text":"<p>Headers:</p> <pre><code>Authorization: Bearer YOUR_ACCESS_TOKEN\n</code></pre> <p>Required Scope: <code>projects:write</code></p> <p>Path Parameters:</p> Parameter Type Required Description <code>project_id</code> string Yes Project identifier <code>user_id</code> string Yes User identifier to remove"},{"location":"api/projects/#example-request_7","title":"Example Request","text":"<pre><code>curl -X DELETE \"https://api.lazi.app/public/projects/proj_123abc/members/user_999zzz\" \\\n  -H \"Authorization: Bearer eyJhbGciOi...\"\n</code></pre>"},{"location":"api/projects/#response_7","title":"Response","text":"<p>Status: <code>204 No Content</code></p>"},{"location":"api/projects/#like-project","title":"Like Project","text":"<p>Add a like to a project (increment like count).</p> <pre><code>POST /projects/{project_id}/like\n</code></pre>"},{"location":"api/projects/#request_8","title":"Request","text":"<p>Headers:</p> <pre><code>Authorization: Bearer YOUR_ACCESS_TOKEN\n</code></pre> <p>Required Scope: <code>projects:read</code></p> <p>Path Parameters:</p> Parameter Type Required Description <code>project_id</code> string Yes Project identifier"},{"location":"api/projects/#example-request_8","title":"Example Request","text":"<pre><code>curl -X POST \"https://api.lazi.app/public/projects/proj_123abc/like\" \\\n  -H \"Authorization: Bearer eyJhbGciOi...\"\n</code></pre>"},{"location":"api/projects/#response_8","title":"Response","text":"<p>Status: <code>200 OK</code></p> <pre><code>{\n  \"project_id\": \"proj_123abc\",\n  \"project_likes\": 43,\n  \"liked_by_user\": true\n}\n</code></pre>"},{"location":"api/projects/#unlike-project","title":"Unlike Project","text":"<p>Remove a like from a project (decrement like count).</p> <pre><code>DELETE /projects/{project_id}/like\n</code></pre>"},{"location":"api/projects/#request_9","title":"Request","text":"<p>Headers:</p> <pre><code>Authorization: Bearer YOUR_ACCESS_TOKEN\n</code></pre> <p>Required Scope: <code>projects:read</code></p> <p>Path Parameters:</p> Parameter Type Required Description <code>project_id</code> string Yes Project identifier"},{"location":"api/projects/#example-request_9","title":"Example Request","text":"<pre><code>curl -X DELETE \"https://api.lazi.app/public/projects/proj_123abc/like\" \\\n  -H \"Authorization: Bearer eyJhbGciOi...\"\n</code></pre>"},{"location":"api/projects/#response_9","title":"Response","text":"<p>Status: <code>200 OK</code></p> <pre><code>{\n  \"project_id\": \"proj_123abc\",\n  \"project_likes\": 42,\n  \"liked_by_user\": false\n}\n</code></pre>"},{"location":"api/projects/#project-transparency","title":"Project Transparency","text":""},{"location":"api/projects/#public-projects-transparency-true","title":"Public Projects (<code>transparency: true</code>)","text":"<ul> <li>Visible to all users</li> <li>Can be discovered via search</li> <li>Anyone with link can view widgets</li> <li>Only members can edit</li> </ul>"},{"location":"api/projects/#private-projects-transparency-false","title":"Private Projects (<code>transparency: false</code>)","text":"<ul> <li>Visible only to members</li> <li>Not discoverable via search</li> <li>Requires authentication and membership</li> <li>Members only can view and edit</li> </ul>"},{"location":"api/projects/#error-responses","title":"Error Responses","text":""},{"location":"api/projects/#400-bad-request","title":"400 Bad Request","text":"<pre><code>{\n  \"detail\": \"Project name is required\",\n  \"error_code\": \"MISSING_FIELD\"\n}\n</code></pre>"},{"location":"api/projects/#403-forbidden","title":"403 Forbidden","text":"<pre><code>{\n  \"detail\": \"You are not a member of this project\",\n  \"error_code\": \"NOT_PROJECT_MEMBER\"\n}\n</code></pre>"},{"location":"api/projects/#404-not-found","title":"404 Not Found","text":"<pre><code>{\n  \"detail\": \"Project not found\",\n  \"error_code\": \"PROJECT_NOT_FOUND\"\n}\n</code></pre>"},{"location":"api/projects/#409-conflict","title":"409 Conflict","text":"<pre><code>{\n  \"detail\": \"User is already a member of this project\",\n  \"error_code\": \"MEMBER_EXISTS\"\n}\n</code></pre>"},{"location":"api/projects/#rate-limits","title":"Rate Limits","text":"<ul> <li>Project creation: 20 per hour per user</li> <li>Project updates: 100 per hour per user</li> <li>Member operations: 50 per hour per project</li> <li>Like operations: 200 per hour per user</li> </ul>"},{"location":"api/projects/#complete-example","title":"Complete Example","text":"<p>Create a project with widgets:</p> <pre><code>import asyncio\nimport os\nfrom lazi_sdk import WriteWidget\nimport httpx\n\nasync def create_complete_project():\n    token = os.getenv(\"LAZI_TOKEN\")\n    user_id = os.getenv(\"LAZI_USER_ID\")\n\n    # 1. Create project\n    url = \"https://api.lazi.app/public/projects\"\n    headers = {\n        \"Authorization\": f\"Bearer {token}\",\n        \"Content-Type\": \"application/json\"\n    }\n\n    project_data = {\n        \"project_name\": \"Analytics Hub\",\n        \"project_transparency\": True,\n        \"project_members\": [user_id],\n        \"organizations\": []\n    }\n\n    async with httpx.AsyncClient() as client:\n        response = await client.post(url, headers=headers, json=project_data)\n        project = response.json()\n        project_id = project[\"project_id\"]\n\n    print(f\"\u2705 Project created: {project_id}\")\n\n    # 2. Create widgets\n    widget_configs = [\n        {\"name\": \"Revenue\", \"size\": \"medium\"},\n        {\"name\": \"Users\", \"size\": \"medium\"},\n        {\"name\": \"Activity\", \"size\": \"large\"}\n    ]\n\n    for config in widget_configs:\n        widget = WriteWidget(token=token, user_id=user_id)\n\n        await widget.create_new(\n            name=config[\"name\"],\n            size=config[\"size\"],\n            project_id=project_id\n        )\n\n        await widget.save()\n        print(f\"\u2705 Widget created: {config['name']}\")\n\n    print(f\"\\n\ud83c\udf89 Complete! Project with {len(widget_configs)} widgets\")\n\nasyncio.run(create_complete_project())\n</code></pre>"},{"location":"api/projects/#next-steps","title":"Next Steps","text":"<ul> <li>Widgets API - Manage widgets</li> <li>Authentication - OAuth2 authentication</li> <li>SDK Examples - Complete examples</li> </ul>"},{"location":"api/widgets/","title":"Widgets API Reference","text":"<p>Widget management endpoints for the Lazi Public API.</p>"},{"location":"api/widgets/#overview","title":"Overview","text":"<p>Widgets are customizable dashboard components that can display data from external sources, execute custom logic, and include media attachments.</p> <p>Base Path: <code>/public/widgets</code></p> <p>Required Scopes:  - <code>widgets:read</code> - Read widget data - <code>widgets:write</code> - Create/update widgets - <code>widgets:delete</code> - Delete widgets</p>"},{"location":"api/widgets/#endpoints","title":"Endpoints","text":""},{"location":"api/widgets/#list-widgets","title":"List Widgets","text":"<p>Retrieve a list of widgets for a specific project.</p> <pre><code>GET /widgets\n</code></pre>"},{"location":"api/widgets/#request","title":"Request","text":"<p>Headers:</p> <pre><code>Authorization: Bearer YOUR_ACCESS_TOKEN\n</code></pre> <p>Query Parameters:</p> Parameter Type Required Description <code>project_id</code> string Yes Project identifier <code>page</code> integer No Page number (default: 1) <code>per_page</code> integer No Items per page (default: 20, max: 100) <code>size</code> string No Filter by size: \"small\", \"medium\", \"large\", \"extra_large\" <code>sort</code> string No Sort field and order (e.g., \"created_at:desc\")"},{"location":"api/widgets/#example-request","title":"Example Request","text":"<pre><code>curl -X GET \"https://api.lazi.app/public/widgets?project_id=proj_123abc&amp;per_page=10\" \\\n  -H \"Authorization: Bearer eyJhbGciOi...\"\n</code></pre> <p>Python Example:</p> <pre><code>from lazi_sdk import ReadWidget\n\nasync def list_widgets():\n    reader = ReadWidget(\n        username=\"john@example.com\",\n        token=\"eyJhbGciOi...\",\n        project_id=\"proj_123abc\"\n    )\n\n    widgets = await reader.list_widgets()\n\n    for widget in widgets:\n        print(f\"{widget.name} - {widget.size}\")\n</code></pre>"},{"location":"api/widgets/#response","title":"Response","text":"<p>Status: <code>200 OK</code></p> <pre><code>{\n  \"data\": [\n    {\n      \"id\": \"widget_123abc\",\n      \"name\": \"Sales Dashboard\",\n      \"description\": \"Real-time sales metrics\",\n      \"content\": [\n        \"https://s3.amazonaws.com/bucket/presigned-url-1\"\n      ],\n      \"size\": \"large\",\n      \"interaction\": {\n        \"https://api.example.com/sales\": {\n          \"params\": {\"period\": \"weekly\"},\n          \"headers\": {\"Authorization\": \"Bearer token\"},\n          \"refresh_interval\": 300,\n          \"logic\": \"def process_data(data, req, user): return data\"\n        }\n      },\n      \"created_at\": \"2024-01-31T12:00:00Z\",\n      \"updated_at\": \"2024-01-31T12:00:00Z\"\n    }\n  ],\n  \"pagination\": {\n    \"page\": 1,\n    \"per_page\": 10,\n    \"total_items\": 23,\n    \"total_pages\": 3,\n    \"has_next\": true,\n    \"has_previous\": false\n  }\n}\n</code></pre>"},{"location":"api/widgets/#get-widget","title":"Get Widget","text":"<p>Retrieve details of a specific widget.</p> <pre><code>GET /widgets/{widget_id}\n</code></pre>"},{"location":"api/widgets/#request_1","title":"Request","text":"<p>Headers:</p> <pre><code>Authorization: Bearer YOUR_ACCESS_TOKEN\n</code></pre> <p>Path Parameters:</p> Parameter Type Required Description <code>widget_id</code> string Yes Widget identifier"},{"location":"api/widgets/#example-request_1","title":"Example Request","text":"<pre><code>curl -X GET \"https://api.lazi.app/public/widgets/widget_123abc\" \\\n  -H \"Authorization: Bearer eyJhbGciOi...\"\n</code></pre> <p>Python Example:</p> <pre><code>from lazi_sdk import ReadWidget\n\nasync def get_widget_details():\n    reader = ReadWidget(\n        username=\"john@example.com\",\n        token=\"eyJhbGciOi...\",\n        project_id=\"proj_123abc\"\n    )\n\n    widget = await reader.get_widget(\"widget_123abc\")\n    print(f\"Widget: {widget.name}\")\n    print(f\"Size: {widget.size}\")\n    print(f\"Media files: {len(widget.content)}\")\n</code></pre>"},{"location":"api/widgets/#response_1","title":"Response","text":"<p>Status: <code>200 OK</code></p> <pre><code>{\n  \"id\": \"widget_123abc\",\n  \"name\": \"Sales Dashboard\",\n  \"description\": \"Real-time sales metrics\",\n  \"content\": [\n    \"https://s3.amazonaws.com/bucket/presigned-url-1\"\n  ],\n  \"size\": \"large\",\n  \"interaction\": {\n    \"https://api.example.com/sales\": {\n      \"params\": {\"period\": \"weekly\"},\n      \"headers\": {\"Authorization\": \"Bearer token\"},\n      \"refresh_interval\": 300,\n      \"logic\": \"def process_data(data, req, user): return data\"\n    }\n  },\n  \"project_id\": \"proj_123abc\",\n  \"user_id\": \"user_789xyz\",\n  \"created_at\": \"2024-01-31T12:00:00Z\",\n  \"updated_at\": \"2024-01-31T12:00:00Z\"\n}\n</code></pre>"},{"location":"api/widgets/#create-widget","title":"Create Widget","text":"<p>Create a new widget.</p> <pre><code>POST /widgets\n</code></pre>"},{"location":"api/widgets/#request_2","title":"Request","text":"<p>Headers:</p> <pre><code>Authorization: Bearer YOUR_ACCESS_TOKEN\nContent-Type: application/json\n</code></pre> <p>Required Scope: <code>widgets:write</code></p> <p>Body:</p> <pre><code>{\n  \"name\": \"Sales Dashboard\",\n  \"description\": \"Real-time sales metrics\",\n  \"size\": \"large\",\n  \"project_id\": \"proj_123abc\",\n  \"endpoint\": \"https://api.example.com/sales\",\n  \"endpoint_data\": {\n    \"params\": {\n      \"period\": \"weekly\",\n      \"metrics\": \"revenue,users\"\n    },\n    \"headers\": {\n      \"Authorization\": \"Bearer external_token\"\n    },\n    \"refresh_interval\": 300,\n    \"logic\": \"def process_data(widget_data, request, user):\\n    return {'revenue': widget_data.get('revenue', 0)}\"\n  }\n}\n</code></pre> <p>Request Schema:</p> Field Type Required Description <code>name</code> string Yes Widget name <code>description</code> string No Widget description <code>size</code> string No Widget size: \"small\", \"medium\", \"large\", \"extra_large\" (default: \"small\") <code>project_id</code> string Yes Project identifier <code>endpoint</code> string No External API endpoint <code>endpoint_data</code> object No Endpoint configuration <code>endpoint_data.params</code> object No Query parameters for endpoint <code>endpoint_data.headers</code> object No HTTP headers for endpoint <code>endpoint_data.refresh_interval</code> integer No Refresh interval in seconds (0 = no refresh) <code>endpoint_data.logic</code> string No Python function to process endpoint data"},{"location":"api/widgets/#example-request_2","title":"Example Request","text":"<pre><code>curl -X POST \"https://api.lazi.app/public/widgets\" \\\n  -H \"Authorization: Bearer eyJhbGciOi...\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"name\": \"Sales Dashboard\",\n    \"description\": \"Real-time sales metrics\",\n    \"size\": \"large\",\n    \"project_id\": \"proj_123abc\",\n    \"endpoint\": \"https://api.example.com/sales\",\n    \"endpoint_data\": {\n      \"refresh_interval\": 300,\n      \"logic\": \"def process_data(data, req, user): return data\"\n    }\n  }'\n</code></pre> <p>Python Example:</p> <pre><code>from lazi_sdk import WriteWidget\n\nasync def create_sales_widget():\n    widget = WriteWidget(\n        token=\"eyJhbGciOi...\",\n        user_id=\"user_789xyz\"\n    )\n\n    await widget.create_new(\n        name=\"Sales Dashboard\",\n        description=\"Real-time sales metrics\",\n        size=\"large\",\n        project_id=\"proj_123abc\"\n    )\n\n    await widget.post(\n        endpoint=\"https://api.example.com/sales\",\n        endpoint_data={\n            \"params\": {\"period\": \"weekly\"},\n            \"refresh_interval\": 300,\n            \"logic\": \"def process_data(data, req, user): return data\"\n        }\n    )\n\n    await widget.save()\n    print(f\"Widget created: {widget.current_widget.id}\")\n</code></pre>"},{"location":"api/widgets/#response_2","title":"Response","text":"<p>Status: <code>201 Created</code></p> <pre><code>{\n  \"id\": \"widget_123abc\",\n  \"name\": \"Sales Dashboard\",\n  \"description\": \"Real-time sales metrics\",\n  \"content\": [],\n  \"size\": \"large\",\n  \"interaction\": {\n    \"https://api.example.com/sales\": {\n      \"params\": {\"period\": \"weekly\"},\n      \"headers\": {},\n      \"refresh_interval\": 300,\n      \"logic\": \"def process_data(data, req, user): return data\"\n    }\n  },\n  \"project_id\": \"proj_123abc\",\n  \"user_id\": \"user_789xyz\",\n  \"created_at\": \"2024-01-31T12:00:00Z\",\n  \"updated_at\": \"2024-01-31T12:00:00Z\"\n}\n</code></pre>"},{"location":"api/widgets/#update-widget","title":"Update Widget","text":"<p>Update an existing widget.</p> <pre><code>PATCH /widgets/{widget_id}\n</code></pre>"},{"location":"api/widgets/#request_3","title":"Request","text":"<p>Headers:</p> <pre><code>Authorization: Bearer YOUR_ACCESS_TOKEN\nContent-Type: application/json\n</code></pre> <p>Required Scope: <code>widgets:write</code></p> <p>Path Parameters:</p> Parameter Type Required Description <code>widget_id</code> string Yes Widget identifier <p>Body: (All fields optional, include only fields to update)</p> <pre><code>{\n  \"name\": \"Updated Dashboard Name\",\n  \"description\": \"Updated description\",\n  \"size\": \"extra_large\"\n}\n</code></pre>"},{"location":"api/widgets/#example-request_3","title":"Example Request","text":"<pre><code>curl -X PATCH \"https://api.lazi.app/public/widgets/widget_123abc\" \\\n  -H \"Authorization: Bearer eyJhbGciOi...\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"name\": \"Updated Sales Dashboard\",\n    \"size\": \"extra_large\"\n  }'\n</code></pre>"},{"location":"api/widgets/#response_3","title":"Response","text":"<p>Status: <code>200 OK</code></p> <pre><code>{\n  \"id\": \"widget_123abc\",\n  \"name\": \"Updated Sales Dashboard\",\n  \"description\": \"Real-time sales metrics\",\n  \"size\": \"extra_large\",\n  \"updated_at\": \"2024-01-31T13:00:00Z\"\n}\n</code></pre>"},{"location":"api/widgets/#delete-widget","title":"Delete Widget","text":"<p>Delete a widget.</p> <pre><code>DELETE /widgets/{widget_id}\n</code></pre>"},{"location":"api/widgets/#request_4","title":"Request","text":"<p>Headers:</p> <pre><code>Authorization: Bearer YOUR_ACCESS_TOKEN\n</code></pre> <p>Required Scope: <code>widgets:delete</code></p> <p>Path Parameters:</p> Parameter Type Required Description <code>widget_id</code> string Yes Widget identifier"},{"location":"api/widgets/#example-request_4","title":"Example Request","text":"<pre><code>curl -X DELETE \"https://api.lazi.app/public/widgets/widget_123abc\" \\\n  -H \"Authorization: Bearer eyJhbGciOi...\"\n</code></pre> <p>Python Example:</p> <pre><code>import httpx\n\nasync def delete_widget(token: str, widget_id: str):\n    url = f\"https://api.lazi.app/public/widgets/{widget_id}\"\n\n    headers = {\"Authorization\": f\"Bearer {token}\"}\n\n    async with httpx.AsyncClient() as client:\n        response = await client.delete(url, headers=headers)\n        return response.status_code == 204\n</code></pre>"},{"location":"api/widgets/#response_4","title":"Response","text":"<p>Status: <code>204 No Content</code></p>"},{"location":"api/widgets/#attach-media","title":"Attach Media","text":"<p>Upload and attach media files to a widget.</p> <pre><code>POST /widgets/{widget_id}/media\n</code></pre>"},{"location":"api/widgets/#request_5","title":"Request","text":"<p>Headers:</p> <pre><code>Authorization: Bearer YOUR_ACCESS_TOKEN\nContent-Type: multipart/form-data\n</code></pre> <p>Required Scope: <code>widgets:write</code>, <code>files:write</code></p> <p>Path Parameters:</p> Parameter Type Required Description <code>widget_id</code> string Yes Widget identifier <p>Form Data:</p> Field Type Required Description <code>file</code> file Yes Media file to upload <code>object_name</code> string No Custom object name (default: original filename) <p>Supported File Types: - Images: jpg, jpeg, png, gif, webp - Videos: mp4, webm, mov - Documents: pdf - Max file size: 10MB</p>"},{"location":"api/widgets/#example-request_5","title":"Example Request","text":"<pre><code>curl -X POST \"https://api.lazi.app/public/widgets/widget_123abc/media\" \\\n  -H \"Authorization: Bearer eyJhbGciOi...\" \\\n  -F \"file=@/path/to/image.png\" \\\n  -F \"object_name=dashboard_logo.png\"\n</code></pre> <p>Python Example:</p> <pre><code>from lazi_sdk import WriteWidget\n\nasync def attach_logo():\n    widget = WriteWidget(\n        token=\"eyJhbGciOi...\",\n        user_id=\"user_789xyz\"\n    )\n\n    # Load existing widget\n    await widget.create_new(\n        name=\"Existing Widget\",\n        project_id=\"proj_123abc\"\n    )\n    widget.current_widget.id = \"widget_123abc\"\n\n    # Attach media\n    await widget.attach_media(\n        object_name=\"dashboard_logo.png\",\n        filename=\"./assets/logo.png\"\n    )\n\n    await widget.save()\n</code></pre>"},{"location":"api/widgets/#response_5","title":"Response","text":"<p>Status: <code>200 OK</code></p> <pre><code>{\n  \"message\": \"Media attached successfully\",\n  \"url\": \"https://s3.amazonaws.com/bucket/presigned-url\",\n  \"object_name\": \"dashboard_logo.png\",\n  \"expires_in\": 3600\n}\n</code></pre>"},{"location":"api/widgets/#record-interaction","title":"Record Interaction","text":"<p>Record a user interaction with a widget (triggers custom logic execution).</p> <pre><code>POST /widgets/{widget_id}/interact\n</code></pre>"},{"location":"api/widgets/#request_6","title":"Request","text":"<p>Headers:</p> <pre><code>Authorization: Bearer YOUR_ACCESS_TOKEN\nContent-Type: application/json\n</code></pre> <p>Path Parameters:</p> Parameter Type Required Description <code>widget_id</code> string Yes Widget identifier <p>Body:</p> <pre><code>{\n  \"endpoint\": \"https://api.example.com/sales\",\n  \"params\": {\n    \"period\": \"monthly\",\n    \"metric\": \"revenue\"\n  }\n}\n</code></pre>"},{"location":"api/widgets/#example-request_6","title":"Example Request","text":"<pre><code>curl -X POST \"https://api.lazi.app/public/widgets/widget_123abc/interact\" \\\n  -H \"Authorization: Bearer eyJhbGciOi...\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"endpoint\": \"https://api.example.com/sales\",\n    \"params\": {\"period\": \"monthly\"}\n  }'\n</code></pre>"},{"location":"api/widgets/#response_6","title":"Response","text":"<p>Status: <code>200 OK</code></p> <pre><code>{\n  \"processed_data\": {\n    \"revenue\": 125000.50,\n    \"growth\": 15.3,\n    \"status\": \"excellent\"\n  },\n  \"endpoint\": \"https://api.example.com/sales\",\n  \"executed_at\": \"2024-01-31T12:00:00Z\"\n}\n</code></pre>"},{"location":"api/widgets/#widget-size-options","title":"Widget Size Options","text":"Size Dimensions Use Case <code>small</code> 1x1 grid Quick stats, icons <code>medium</code> 2x2 grid Charts, small tables <code>large</code> 4x2 grid Dashboards, detailed data <code>extra_large</code> 4x4 grid Full dashboards, galleries"},{"location":"api/widgets/#custom-logic","title":"Custom Logic","text":""},{"location":"api/widgets/#logic-function-signature","title":"Logic Function Signature","text":"<pre><code>def process_data(widget_data: dict, request: Request, user: User) -&gt; dict:\n    \"\"\"\n    Process widget data from external endpoint.\n\n    Args:\n        widget_data: Data returned from the endpoint\n        request: FastAPI Request object\n        user: Current user object\n\n    Returns:\n        Processed data to display in widget\n    \"\"\"\n    # Your custom logic here\n    return processed_data\n</code></pre>"},{"location":"api/widgets/#available-modules","title":"Available Modules","text":"<p>Your custom logic can import: - <code>datetime</code>, <code>time</code> - <code>json</code>, <code>re</code> - <code>math</code>, <code>statistics</code> - <code>collections</code>, <code>itertools</code></p> <p>Forbidden modules (for security): - <code>os</code>, <code>sys</code>, <code>subprocess</code> - <code>eval</code>, <code>exec</code>, <code>compile</code> - <code>open</code>, <code>file</code> - <code>import</code>, <code>__import__</code></p>"},{"location":"api/widgets/#example-logic-functions","title":"Example Logic Functions","text":"<p>Calculate Percentage Change:</p> <pre><code>def process_data(widget_data, request, user):\n    current = widget_data.get('current_value', 0)\n    previous = widget_data.get('previous_value', 1)\n\n    change = ((current - previous) / previous) * 100\n\n    return {\n        'current': current,\n        'change_percent': round(change, 2),\n        'trend': 'up' if change &gt; 0 else 'down'\n    }\n</code></pre> <p>Filter and Sort Data:</p> <pre><code>def process_data(widget_data, request, user):\n    items = widget_data.get('items', [])\n\n    # Filter active items\n    active_items = [item for item in items if item.get('status') == 'active']\n\n    # Sort by priority\n    sorted_items = sorted(active_items, key=lambda x: x.get('priority', 0), reverse=True)\n\n    return {\n        'total': len(items),\n        'active': len(active_items),\n        'top_items': sorted_items[:5]\n    }\n</code></pre>"},{"location":"api/widgets/#error-responses","title":"Error Responses","text":""},{"location":"api/widgets/#400-bad-request","title":"400 Bad Request","text":"<pre><code>{\n  \"detail\": \"Invalid widget size. Must be one of: small, medium, large, extra_large\",\n  \"error_code\": \"INVALID_SIZE\"\n}\n</code></pre>"},{"location":"api/widgets/#403-forbidden","title":"403 Forbidden","text":"<pre><code>{\n  \"detail\": \"Insufficient permissions. Required scope: widgets:write\",\n  \"error_code\": \"INSUFFICIENT_SCOPE\"\n}\n</code></pre>"},{"location":"api/widgets/#404-not-found","title":"404 Not Found","text":"<pre><code>{\n  \"detail\": \"Widget not found\",\n  \"error_code\": \"WIDGET_NOT_FOUND\"\n}\n</code></pre>"},{"location":"api/widgets/#422-validation-error","title":"422 Validation Error","text":"<pre><code>{\n  \"detail\": [\n    {\n      \"loc\": [\"body\", \"name\"],\n      \"msg\": \"field required\",\n      \"type\": \"value_error.missing\"\n    }\n  ]\n}\n</code></pre>"},{"location":"api/widgets/#rate-limits","title":"Rate Limits","text":"<ul> <li>Widget creation: 100 per hour per user</li> <li>Widget updates: 500 per hour per user</li> <li>Media uploads: 50 per hour per user</li> <li>Interactions: 1000 per hour per user</li> </ul>"},{"location":"api/widgets/#next-steps","title":"Next Steps","text":"<ul> <li>Projects API - Manage projects</li> <li>Custom Endpoints - Create dynamic widget endpoints</li> <li>Examples - Complete widget examples</li> </ul>"},{"location":"sdk/authentication/","title":"SDK Authentication","text":"<p>The Lazi SDK uses OAuth2 for secure authentication. This guide covers how to authenticate users and manage access tokens.</p>"},{"location":"sdk/authentication/#authentication-flow","title":"Authentication Flow","text":"<ol> <li>Obtain OAuth2 Credentials from the Lazi developer portal</li> <li>Get Access Token by authenticating with username/password or API key</li> <li>Initialize SDK with the access token</li> <li>Automatic Token Refresh happens behind the scenes</li> </ol>"},{"location":"sdk/authentication/#basic-authentication","title":"Basic Authentication","text":""},{"location":"sdk/authentication/#using-username-and-password","title":"Using Username and Password","text":"<pre><code>from lazi_sdk import WriteWidget\n\n# Initialize with OAuth token\nwidget = WriteWidget(\n    token=\"your_oauth_access_token\",\n    user_id=\"user_12345\"\n)\n\n# SDK automatically verifies token on first operation\nawait widget.create_new(name=\"My Widget\", project_id=\"proj_001\")\n</code></pre>"},{"location":"sdk/authentication/#getting-an-access-token","title":"Getting an Access Token","text":"<p>To obtain an access token, make a request to the OAuth2 token endpoint:</p> <pre><code>import requests\n\nresponse = requests.post(\n    \"https://api.lazi.com/oauth/token\",\n    data={\n        \"grant_type\": \"password\",\n        \"username\": \"your_username\",\n        \"password\": \"your_password\",\n        \"scope\": \"widgets:write widgets:read projects:read\"\n    }\n)\n\ntokens = response.json()\naccess_token = tokens[\"access_token\"]\nrefresh_token = tokens[\"refresh_token\"]\n</code></pre>"},{"location":"sdk/authentication/#token-management","title":"Token Management","text":""},{"location":"sdk/authentication/#access-token-expiration","title":"Access Token Expiration","text":"<p>Access tokens expire after 1 hour. The SDK handles token refresh automatically when using the <code>WriteWidget</code> or <code>ReadWidget</code> classes.</p>"},{"location":"sdk/authentication/#refresh-tokens","title":"Refresh Tokens","text":"<p>Refresh tokens are valid for 30 days and can be used to get new access tokens:</p> <pre><code>import requests\n\nresponse = requests.post(\n    \"https://api.lazi.com/oauth/token/refresh\",\n    json={\"refresh_token\": refresh_token}\n)\n\nnew_tokens = response.json()\nnew_access_token = new_tokens[\"access_token\"]\n</code></pre>"},{"location":"sdk/authentication/#oauth2-scopes","title":"OAuth2 Scopes","text":"<p>Request specific scopes based on what operations you need:</p>"},{"location":"sdk/authentication/#available-scopes","title":"Available Scopes","text":"Scope Description <code>widgets:read</code> Read widget data <code>widgets:write</code> Create and modify widgets <code>widgets:delete</code> Delete widgets <code>widgets:admin</code> Full widget administrative access <code>widgets:execute</code> Execute custom widget logic <code>projects:read</code> Read project data <code>projects:write</code> Create and modify projects <code>projects:delete</code> Delete projects <code>projects:admin</code> Full project administrative access <code>files:read</code> Read uploaded files <code>files:write</code> Upload and modify files <code>files:delete</code> Delete files <code>user:profile:read</code> Read user profile <code>user:profile:write</code> Modify user profile"},{"location":"sdk/authentication/#requesting-scopes","title":"Requesting Scopes","text":"<pre><code>response = requests.post(\n    \"https://api.lazi.com/oauth/token\",\n    data={\n        \"grant_type\": \"password\",\n        \"username\": \"your_username\",\n        \"password\": \"your_password\",\n        \"scope\": \"widgets:write widgets:read files:write projects:read\"\n    }\n)\n</code></pre>"},{"location":"sdk/authentication/#authentication-examples","title":"Authentication Examples","text":""},{"location":"sdk/authentication/#example-1-read-only-access","title":"Example 1: Read-Only Access","text":"<pre><code>from lazi_sdk import ReadWidget\n\n# Initialize with read-only token\nreader = ReadWidget(\n    username=\"developer@example.com\",\n    token=\"read_only_access_token\",\n    project_id=\"project_123\"\n)\n\n# List all widgets (requires widgets:read scope)\nwidgets = await reader.list_widgets()\n</code></pre>"},{"location":"sdk/authentication/#example-2-full-widget-management","title":"Example 2: Full Widget Management","text":"<pre><code>from lazi_sdk import WriteWidget\n\n# Initialize with write token\nwriter = WriteWidget(\n    token=\"full_access_token\",\n    user_id=\"user_456\"\n)\n\n# Create widget (requires widgets:write scope)\nawait writer.create_new(\n    name=\"Analytics Dashboard\",\n    description=\"Real-time metrics\",\n    project_id=\"project_123\"\n)\n\n# Attach file (requires widgets:write and files:write scopes)\nawait writer.attach_media(\"chart.png\", \"./local_chart.png\")\n\n# Save\nawait writer.save()\n</code></pre>"},{"location":"sdk/authentication/#example-3-api-key-authentication","title":"Example 3: API Key Authentication","text":"<p>For server-to-server authentication, use API keys:</p> <pre><code>import requests\n\nresponse = requests.post(\n    \"https://api.lazi.com/oauth/token\",\n    data={\n        \"grant_type\": \"client_credentials\",\n        \"client_id\": \"your_api_key\",\n        \"client_secret\": \"your_api_secret\",\n        \"scope\": \"widgets:write projects:read\"\n    }\n)\n\napi_token = response.json()[\"access_token\"]\n</code></pre>"},{"location":"sdk/authentication/#security-best-practices","title":"Security Best Practices","text":""},{"location":"sdk/authentication/#1-never-hardcode-tokens","title":"1. Never Hardcode Tokens","text":"<pre><code># \u274c Bad\ntoken = \"sk-1234567890abcdef\"\n\n# \u2705 Good\nimport os\ntoken = os.getenv(\"LAZI_ACCESS_TOKEN\")\n</code></pre>"},{"location":"sdk/authentication/#2-use-environment-variables","title":"2. Use Environment Variables","text":"<pre><code>from dotenv import load_dotenv\nimport os\n\nload_dotenv()\n\ntoken = os.getenv(\"LAZI_ACCESS_TOKEN\")\nuser_id = os.getenv(\"LAZI_USER_ID\")\n</code></pre>"},{"location":"sdk/authentication/#3-handle-token-expiration","title":"3. Handle Token Expiration","text":"<pre><code>from lazi_sdk import WriteWidget\nfrom fastapi import HTTPException\n\ntry:\n    widget = WriteWidget(token=token, user_id=user_id)\n    await widget.create_new(name=\"Test Widget\", project_id=\"proj_001\")\nexcept HTTPException as e:\n    if e.status_code == 401:\n        # Token expired, refresh it\n        new_token = refresh_access_token(refresh_token)\n        widget = WriteWidget(token=new_token, user_id=user_id)\n</code></pre>"},{"location":"sdk/authentication/#4-scope-principle-of-least-privilege","title":"4. Scope Principle of Least Privilege","text":"<p>Only request scopes you actually need:</p> <pre><code># \u274c Bad - requesting unnecessary scopes\nscopes = \"widgets:admin projects:admin files:delete system:admin\"\n\n# \u2705 Good - only what you need\nscopes = \"widgets:read projects:read\"\n</code></pre>"},{"location":"sdk/authentication/#error-handling","title":"Error Handling","text":"<pre><code>from fastapi import HTTPException\n\ntry:\n    widget = WriteWidget(token=token, user_id=user_id)\n    await widget.create_new(name=\"My Widget\", project_id=\"proj_001\")\nexcept HTTPException as e:\n    if e.status_code == 401:\n        print(\"Authentication failed: Invalid or expired token\")\n    elif e.status_code == 403:\n        print(\"Permission denied: Insufficient scopes\")\n    elif e.status_code == 404:\n        print(\"Resource not found\")\n    else:\n        print(f\"Error: {e.detail}\")\n</code></pre>"},{"location":"sdk/authentication/#next-steps","title":"Next Steps","text":"<ul> <li>Widget Management - Learn how to create and manage widgets</li> <li>Examples - See complete authentication examples</li> <li>Advanced Security - Learn about advanced security features</li> </ul>"},{"location":"sdk/examples/","title":"SDK Examples","text":"<p>Complete, real-world examples using the Lazi SDK.</p>"},{"location":"sdk/examples/#table-of-contents","title":"Table of Contents","text":"<ul> <li>Basic Widget Creation</li> <li>Analytics Dashboard</li> <li>GitHub Integration</li> <li>Multi-Widget Project</li> <li>Real-Time Data Widget</li> <li>Image Gallery Widget</li> </ul>"},{"location":"sdk/examples/#basic-widget-creation","title":"Basic Widget Creation","text":"<p>Simple widget creation and management:</p> <pre><code>import asyncio\nimport os\nfrom lazi_sdk import WriteWidget\nfrom dotenv import load_dotenv\n\nload_dotenv()\n\nasync def create_simple_widget():\n    \"\"\"Create a basic widget\"\"\"\n\n    # Initialize SDK\n    widget = WriteWidget(\n        token=os.getenv(\"LAZI_TOKEN\"),\n        user_id=os.getenv(\"LAZI_USER_ID\")\n    )\n\n    # Create widget\n    await widget.create_new(\n        name=\"My First Widget\",\n        description=\"A simple example widget\",\n        size=\"medium\",\n        project_id=\"demo_project_001\"\n    )\n\n    # Save\n    await widget.save()\n\n    print(f\"\u2705 Widget created: {widget.current_widget.id}\")\n    print(f\"   Name: {widget.current_widget.name}\")\n    print(f\"   Size: {widget.current_widget.size}\")\n\nif __name__ == \"__main__\":\n    asyncio.run(create_simple_widget())\n</code></pre>"},{"location":"sdk/examples/#analytics-dashboard","title":"Analytics Dashboard","text":"<p>Create a dashboard widget that fetches real-time analytics:</p> <pre><code>import asyncio\nimport os\nfrom lazi_sdk import WriteWidget\n\nasync def create_analytics_dashboard():\n    \"\"\"Create analytics dashboard widget\"\"\"\n\n    widget = WriteWidget(\n        token=os.getenv(\"LAZI_TOKEN\"),\n        user_id=os.getenv(\"LAZI_USER_ID\")\n    )\n\n    # Create widget\n    await widget.create_new(\n        name=\"Sales Analytics Dashboard\",\n        description=\"Real-time sales metrics and KPIs\",\n        size=\"extra_large\",\n        project_id=os.getenv(\"PROJECT_ID\")\n    )\n\n    # Configure analytics endpoint\n    await widget.post(\n        endpoint=\"https://analytics.example.com/api/v1/dashboard\",\n        endpoint_data={\n            \"params\": {\n                \"metrics\": \"revenue,users,conversion\",\n                \"date_range\": \"last_7_days\",\n                \"granularity\": \"daily\"\n            },\n            \"headers\": {\n                \"Authorization\": f\"Bearer {os.getenv('ANALYTICS_TOKEN')}\",\n                \"Content-Type\": \"application/json\"\n            },\n            \"refresh_interval\": 300,  # Update every 5 minutes\n            \"logic\": \"\"\"\ndef process_data(widget_data, request, user):\n    # Extract key metrics\n    revenue = widget_data.get('revenue', {})\n    users = widget_data.get('users', {})\n    conversion = widget_data.get('conversion', {})\n\n    # Calculate trends\n    revenue_trend = revenue.get('current', 0) - revenue.get('previous', 0)\n    user_growth = ((users.get('current', 0) - users.get('previous', 0)) / users.get('previous', 1)) * 100\n\n    return {\n        'kpis': {\n            'revenue': {\n                'value': f\"${revenue.get('current', 0):,.2f}\",\n                'trend': 'up' if revenue_trend &gt; 0 else 'down',\n                'change': f\"{abs(revenue_trend):,.2f}\"\n            },\n            'users': {\n                'value': users.get('current', 0),\n                'growth': f\"{user_growth:.1f}%\"\n            },\n            'conversion_rate': {\n                'value': f\"{conversion.get('rate', 0):.2f}%\",\n                'status': 'good' if conversion.get('rate', 0) &gt; 2.5 else 'needs_improvement'\n            }\n        },\n        'charts': {\n            'revenue_over_time': widget_data.get('revenue_timeline', []),\n            'user_acquisition': widget_data.get('user_timeline', [])\n        },\n        'updated_at': widget_data.get('timestamp')\n    }\n            \"\"\"\n        }\n    )\n\n    # Attach dashboard logo\n    await widget.attach_media(\n        object_name=\"dashboard_logo.png\",\n        filename=\"./assets/company_logo.png\"\n    )\n\n    await widget.save()\n    print(f\"\u2705 Analytics dashboard created: {widget.current_widget.id}\")\n\nasyncio.run(create_analytics_dashboard())\n</code></pre>"},{"location":"sdk/examples/#github-integration","title":"GitHub Integration","text":"<p>Widget that displays GitHub repository statistics:</p> <pre><code>import asyncio\nimport os\nfrom lazi_sdk import WriteWidget\n\nasync def create_github_widget():\n    \"\"\"Create GitHub repository stats widget\"\"\"\n\n    widget = WriteWidget(\n        token=os.getenv(\"LAZI_TOKEN\"),\n        user_id=os.getenv(\"LAZI_USER_ID\")\n    )\n\n    # GitHub repository details\n    repo_owner = \"Jacey1225\"\n    repo_name = \"personal-manager-02\"\n\n    await widget.create_new(\n        name=f\"{repo_owner}/{repo_name}\",\n        description=\"GitHub repository statistics\",\n        size=\"large\",\n        project_id=os.getenv(\"PROJECT_ID\")\n    )\n\n    await widget.post(\n        endpoint=f\"https://api.github.com/repos/{repo_owner}/{repo_name}\",\n        endpoint_data={\n            \"params\": {},\n            \"headers\": {\n                \"Accept\": \"application/vnd.github.v3+json\",\n                \"Authorization\": f\"token {os.getenv('GITHUB_TOKEN')}\"\n            },\n            \"refresh_interval\": 3600,  # Update hourly\n            \"logic\": \"\"\"\ndef process_data(widget_data, request, user):\n    return {\n        'repository': {\n            'name': widget_data.get('full_name'),\n            'description': widget_data.get('description'),\n            'url': widget_data.get('html_url')\n        },\n        'stats': {\n            'stars': widget_data.get('stargazers_count', 0),\n            'forks': widget_data.get('forks_count', 0),\n            'watchers': widget_data.get('watchers_count', 0),\n            'open_issues': widget_data.get('open_issues_count', 0)\n        },\n        'metadata': {\n            'language': widget_data.get('language'),\n            'license': widget_data.get('license', {}).get('name', 'None'),\n            'created_at': widget_data.get('created_at'),\n            'updated_at': widget_data.get('updated_at')\n        },\n        'popularity': 'high' if widget_data.get('stargazers_count', 0) &gt; 100 else 'moderate'\n    }\n            \"\"\"\n        }\n    )\n\n    await widget.save()\n    print(f\"\u2705 GitHub widget created: {widget.current_widget.id}\")\n\nasyncio.run(create_github_widget())\n</code></pre>"},{"location":"sdk/examples/#multi-widget-project","title":"Multi-Widget Project","text":"<p>Create multiple widgets for a single project:</p> <pre><code>import asyncio\nimport os\nfrom lazi_sdk import WriteWidget, ReadWidget\n\nasync def create_project_dashboard():\n    \"\"\"Create a complete dashboard with multiple widgets\"\"\"\n\n    project_id = os.getenv(\"PROJECT_ID\")\n    token = os.getenv(\"LAZI_TOKEN\")\n    user_id = os.getenv(\"LAZI_USER_ID\")\n\n    widgets_config = [\n        {\n            \"name\": \"Team Overview\",\n            \"description\": \"Team members and roles\",\n            \"size\": \"medium\",\n            \"endpoint\": \"/api/v1/team/overview\",\n            \"refresh\": 0\n        },\n        {\n            \"name\": \"Recent Activity\",\n            \"description\": \"Latest project updates\",\n            \"size\": \"medium\",\n            \"endpoint\": \"/api/v1/activity/recent\",\n            \"refresh\": 60\n        },\n        {\n            \"name\": \"Task Progress\",\n            \"description\": \"Current sprint progress\",\n            \"size\": \"large\",\n            \"endpoint\": \"/api/v1/tasks/progress\",\n            \"refresh\": 300\n        },\n        {\n            \"name\": \"Quick Stats\",\n            \"description\": \"Key project metrics\",\n            \"size\": \"small\",\n            \"endpoint\": \"/api/v1/stats/quick\",\n            \"refresh\": 180\n        }\n    ]\n\n    created_widgets = []\n\n    for config in widgets_config:\n        widget = WriteWidget(token=token, user_id=user_id)\n\n        await widget.create_new(\n            name=config[\"name\"],\n            description=config[\"description\"],\n            size=config[\"size\"],\n            project_id=project_id\n        )\n\n        await widget.post(\n            endpoint=config[\"endpoint\"],\n            endpoint_data={\n                \"params\": {\"project_id\": project_id},\n                \"headers\": {\"Authorization\": f\"Bearer {token}\"},\n                \"refresh_interval\": config[\"refresh\"],\n                \"logic\": \"def process_data(data, req, user): return data\"\n            }\n        )\n\n        await widget.save()\n        created_widgets.append(widget.current_widget.id)\n        print(f\"\u2705 Created: {config['name']}\")\n\n    # Verify all widgets\n    reader = ReadWidget(\n        username=os.getenv(\"LAZI_USERNAME\"),\n        token=token,\n        project_id=project_id\n    )\n\n    all_widgets = await reader.list_widgets()\n    print(f\"\\n\ud83d\udcca Total widgets in project: {len(all_widgets)}\")\n\n    return created_widgets\n\nasyncio.run(create_project_dashboard())\n</code></pre>"},{"location":"sdk/examples/#real-time-data-widget","title":"Real-Time Data Widget","text":"<p>Widget with real-time stock market data:</p> <pre><code>import asyncio\nimport os\nfrom lazi_sdk import WriteWidget\n\nasync def create_stock_widget():\n    \"\"\"Create real-time stock ticker widget\"\"\"\n\n    widget = WriteWidget(\n        token=os.getenv(\"LAZI_TOKEN\"),\n        user_id=os.getenv(\"LAZI_USER_ID\")\n    )\n\n    await widget.create_new(\n        name=\"Stock Market Ticker\",\n        description=\"Real-time stock prices\",\n        size=\"medium\",\n        project_id=os.getenv(\"PROJECT_ID\")\n    )\n\n    await widget.post(\n        endpoint=\"https://api.marketdata.app/v1/stocks/quotes/AAPL,GOOGL,MSFT\",\n        endpoint_data={\n            \"params\": {\n                \"format\": \"json\"\n            },\n            \"headers\": {\n                \"Authorization\": f\"Bearer {os.getenv('MARKET_DATA_TOKEN')}\"\n            },\n            \"refresh_interval\": 60,  # Update every minute\n            \"logic\": \"\"\"\ndef process_data(widget_data, request, user):\n    stocks = []\n\n    for quote in widget_data.get('quotes', []):\n        symbol = quote.get('symbol')\n        price = quote.get('last', 0)\n        change = quote.get('change', 0)\n        change_pct = quote.get('changepct', 0)\n\n        stocks.append({\n            'symbol': symbol,\n            'price': f\"${price:.2f}\",\n            'change': f\"${change:.2f}\",\n            'change_percent': f\"{change_pct:+.2f}%\",\n            'trend': 'up' if change &gt; 0 else 'down' if change &lt; 0 else 'flat',\n            'volume': quote.get('volume', 0)\n        })\n\n    return {\n        'stocks': stocks,\n        'market_status': 'open' if widget_data.get('market_open') else 'closed',\n        'last_updated': widget_data.get('timestamp')\n    }\n            \"\"\"\n        }\n    )\n\n    await widget.save()\n    print(f\"\u2705 Stock ticker created: {widget.current_widget.id}\")\n\nasyncio.run(create_stock_widget())\n</code></pre>"},{"location":"sdk/examples/#image-gallery-widget","title":"Image Gallery Widget","text":"<p>Widget displaying an image gallery with media files:</p> <pre><code>import asyncio\nimport os\nfrom pathlib import Path\nfrom lazi_sdk import WriteWidget\n\nasync def create_gallery_widget():\n    \"\"\"Create image gallery widget\"\"\"\n\n    widget = WriteWidget(\n        token=os.getenv(\"LAZI_TOKEN\"),\n        user_id=os.getenv(\"LAZI_USER_ID\")\n    )\n\n    await widget.create_new(\n        name=\"Product Gallery\",\n        description=\"Product images and media\",\n        size=\"extra_large\",\n        project_id=os.getenv(\"PROJECT_ID\")\n    )\n\n    # Upload multiple images\n    image_dir = Path(\"./product_images\")\n\n    if image_dir.exists():\n        for image_file in image_dir.glob(\"*.{jpg,png,jpeg}\"):\n            print(f\"Uploading {image_file.name}...\")\n            await widget.attach_media(\n                object_name=image_file.name,\n                filename=str(image_file)\n            )\n\n    # Configure gallery interaction\n    await widget.post(\n        endpoint=\"/api/v1/products/gallery\",\n        endpoint_data={\n            \"params\": {\n                \"category\": \"electronics\",\n                \"limit\": 20\n            },\n            \"headers\": {},\n            \"refresh_interval\": 0,  # Static gallery\n            \"logic\": \"\"\"\ndef process_data(widget_data, request, user):\n    # Organize images into categories\n    images = widget_data.get('images', [])\n\n    return {\n        'gallery': {\n            'total_images': len(images),\n            'categories': {\n                'featured': [img for img in images if img.get('featured')],\n                'new': [img for img in images if img.get('is_new')],\n                'all': images\n            }\n        },\n        'layout': 'grid',\n        'thumbnail_size': 'medium'\n    }\n            \"\"\"\n        }\n    )\n\n    await widget.save()\n    print(f\"\u2705 Gallery widget created: {widget.current_widget.id}\")\n    print(f\"   Total media files: {len(widget.current_widget.content)}\")\n\nasyncio.run(create_gallery_widget())\n</code></pre>"},{"location":"sdk/examples/#testing-and-error-handling","title":"Testing and Error Handling","text":"<p>Complete example with error handling:</p> <pre><code>import asyncio\nimport os\nfrom lazi_sdk import WriteWidget\nfrom fastapi import HTTPException\n\nasync def robust_widget_creation():\n    \"\"\"Widget creation with comprehensive error handling\"\"\"\n\n    try:\n        # Validate environment\n        required_vars = [\"LAZI_TOKEN\", \"LAZI_USER_ID\", \"PROJECT_ID\"]\n        for var in required_vars:\n            if not os.getenv(var):\n                raise ValueError(f\"Missing environment variable: {var}\")\n\n        # Initialize widget\n        widget = WriteWidget(\n            token=os.getenv(\"LAZI_TOKEN\"),\n            user_id=os.getenv(\"LAZI_USER_ID\")\n        )\n\n        # Create widget\n        await widget.create_new(\n            name=\"Robust Widget\",\n            description=\"Widget with error handling\",\n            size=\"medium\",\n            project_id=os.getenv(\"PROJECT_ID\")\n        )\n\n        # Save\n        await widget.save()\n\n        print(f\"\u2705 Success! Widget ID: {widget.current_widget.id}\")\n        return widget.current_widget.id\n\n    except ValueError as e:\n        print(f\"\u274c Configuration error: {str(e)}\")\n        return None\n\n    except HTTPException as e:\n        if e.status_code == 401:\n            print(\"\u274c Authentication failed: Check your token\")\n        elif e.status_code == 403:\n            print(\"\u274c Permission denied: Insufficient scopes\")\n        elif e.status_code == 404:\n            print(\"\u274c Not found: Check your project ID\")\n        else:\n            print(f\"\u274c HTTP error: {e.detail}\")\n        return None\n\n    except Exception as e:\n        print(f\"\u274c Unexpected error: {str(e)}\")\n        return None\n\nasyncio.run(robust_widget_creation())\n</code></pre>"},{"location":"sdk/examples/#next-steps","title":"Next Steps","text":"<ul> <li>Authentication Guide - Learn more about OAuth2 authentication</li> <li>Widget Management - Detailed widget API documentation</li> <li>Custom Endpoints - Create custom widget endpoints</li> </ul>"},{"location":"sdk/installation/","title":"SDK Installation Guide","text":""},{"location":"sdk/installation/#installation","title":"Installation","text":"<p>Install the Lazi SDK using pip:</p> <pre><code>pip install Lazi-sdk\n</code></pre>"},{"location":"sdk/installation/#requirements","title":"Requirements","text":"<ul> <li>Python 3.9 or higher</li> <li>Active internet connection for API calls</li> </ul>"},{"location":"sdk/installation/#dependencies","title":"Dependencies","text":"<p>The SDK automatically installs the following dependencies:</p> <ul> <li><code>fastapi&gt;=0.104.0</code> - Web framework support</li> <li><code>pydantic&gt;=2.0.0</code> - Data validation</li> <li><code>motor&gt;=3.3.0</code> - Async MongoDB driver</li> <li><code>pymongo&gt;=4.5.0</code> - MongoDB support</li> <li><code>python-dotenv&gt;=1.0.0</code> - Environment variables</li> <li><code>certifi&gt;=2023.7.22</code> - SSL certificates</li> <li><code>boto3&gt;=1.28.0</code> - AWS S3 integration</li> <li><code>botocore&gt;=1.31.0</code> - AWS SDK core</li> <li><code>passlib[bcrypt]&gt;=1.7.4</code> - Password hashing</li> <li><code>pyjwt&gt;=2.8.0</code> - JWT token handling</li> <li><code>python-multipart&gt;=0.0.6</code> - File uploads</li> </ul>"},{"location":"sdk/installation/#development-installation","title":"Development Installation","text":"<p>For contributing to the SDK:</p> <pre><code># Clone the repository\ngit clone https://github.com/Jacey1225/personal-manager-02.git\ncd personal-manager-02\n\n# Install in editable mode with dev dependencies\npip install -e \".[dev]\"\n</code></pre>"},{"location":"sdk/installation/#development-dependencies","title":"Development Dependencies","text":"<pre><code>pip install Lazi-sdk[dev]\n</code></pre> <p>Includes: - <code>pytest</code> - Testing framework - <code>black</code> - Code formatter - <code>ruff</code> - Linter - <code>mypy</code> - Type checker - <code>pre-commit</code> - Git hooks</p>"},{"location":"sdk/installation/#environment-setup","title":"Environment Setup","text":"<p>Create a <code>.env</code> file in your project root:</p> <pre><code># API Configuration\nAPI_BASE_URL=https://api.lazi.com\nJWT_SECRET=your-secret-key\n\n# MongoDB Configuration\nMONGO_URI=mongodb://localhost:27017\n\n# AWS S3 Configuration (optional, for media uploads)\nAWS_ACCESS_KEY=your-access-key\nAWS_SECRET_KEY=your-secret-key\nAWS_DEFAULT_REGION=us-east-1\n</code></pre>"},{"location":"sdk/installation/#verify-installation","title":"Verify Installation","text":"<pre><code>import lazi_sdk\n\nprint(lazi_sdk.__version__)\n# Output: 0.1.0\n</code></pre>"},{"location":"sdk/installation/#quick-start","title":"Quick Start","text":"<p>After installation, see the Authentication Guide to get started with the SDK.</p>"},{"location":"sdk/installation/#troubleshooting","title":"Troubleshooting","text":""},{"location":"sdk/installation/#import-errors","title":"Import Errors","text":"<p>If you encounter import errors:</p> <pre><code># Upgrade pip\npip install --upgrade pip\n\n# Reinstall the package\npip uninstall Lazi-sdk\npip install Lazi-sdk\n</code></pre>"},{"location":"sdk/installation/#ssl-certificate-issues","title":"SSL Certificate Issues","text":"<p>If you encounter SSL errors:</p> <pre><code>pip install --upgrade certifi\n</code></pre>"},{"location":"sdk/installation/#asyncawait-issues","title":"Async/Await Issues","text":"<p>Make sure you're using Python 3.9+ and running async functions with:</p> <pre><code>import asyncio\n\nasync def main():\n    # Your async code here\n    pass\n\nasyncio.run(main())\n</code></pre>"},{"location":"sdk/installation/#next-steps","title":"Next Steps","text":"<ul> <li>Authentication Guide - Learn how to authenticate with OAuth2</li> <li>Widget Management - Create and manage widgets</li> <li>Examples - See complete code examples</li> </ul>"},{"location":"sdk/widgets/","title":"Widget Management with SDK","text":"<p>Complete guide to creating, reading, updating, and managing widgets using the Lazi SDK.</p>"},{"location":"sdk/widgets/#widget-classes","title":"Widget Classes","text":"<p>The SDK provides two main classes for widget management:</p> <ul> <li><code>WriteWidget</code> - Create, modify, and delete widgets</li> <li><code>ReadWidget</code> - Read and list widgets</li> </ul>"},{"location":"sdk/widgets/#creating-widgets","title":"Creating Widgets","text":""},{"location":"sdk/widgets/#basic-widget-creation","title":"Basic Widget Creation","text":"<pre><code>from lazi_sdk import WriteWidget\n\n# Initialize\nwidget = WriteWidget(\n    token=\"your_access_token\",\n    user_id=\"user_123\"\n)\n\n# Create a new widget\nawait widget.create_new(\n    name=\"Sales Dashboard\",\n    description=\"Real-time sales metrics\",\n    size=\"large\",  # Options: small, medium, large, extra_large\n    project_id=\"project_456\"\n)\n\n# Save to database\nawait widget.save()\n\nprint(f\"Widget created with ID: {widget.current_widget.id}\")\n</code></pre>"},{"location":"sdk/widgets/#widget-sizes","title":"Widget Sizes","text":"<p>Available widget sizes:</p> <ul> <li><code>\"small\"</code> - Compact widget (1x1 grid)</li> <li><code>\"medium\"</code> - Standard widget (2x2 grid)</li> <li><code>\"large\"</code> - Large widget (4x2 grid)</li> <li><code>\"extra_large\"</code> - Extra large widget (4x4 grid)</li> </ul>"},{"location":"sdk/widgets/#attaching-media","title":"Attaching Media","text":""},{"location":"sdk/widgets/#upload-files-to-widgets","title":"Upload Files to Widgets","text":"<pre><code># Create widget\nawait widget.create_new(\n    name=\"Product Gallery\",\n    description=\"Product images\",\n    project_id=\"project_001\"\n)\n\n# Attach image\nawait widget.attach_media(\n    object_name=\"product_image.jpg\",\n    filename=\"./local/path/to/image.jpg\"\n)\n\n# Attach multiple files\nfor image in [\"img1.jpg\", \"img2.jpg\", \"img3.jpg\"]:\n    await widget.attach_media(\n        object_name=image,\n        filename=f\"./images/{image}\"\n    )\n\n# Save with all media\nawait widget.save()\n</code></pre>"},{"location":"sdk/widgets/#supported-media-types","title":"Supported Media Types","text":"<ul> <li>Images: JPG, PNG, GIF, WebP</li> <li>Videos: MP4, WebM, AVI</li> <li>Documents: PDF, DOCX, TXT</li> <li>Archives: ZIP, TAR</li> </ul>"},{"location":"sdk/widgets/#widget-interactions","title":"Widget Interactions","text":""},{"location":"sdk/widgets/#configure-endpoint-and-logic","title":"Configure Endpoint and Logic","text":"<pre><code># Create widget with custom interaction\nawait widget.create_new(\n    name=\"GitHub Stats\",\n    description=\"Repository statistics\",\n    project_id=\"project_001\"\n)\n\n# Configure interaction endpoint\nawait widget.post(\n    endpoint=\"https://api.github.com/repos/owner/repo\",\n    endpoint_data={\n        \"params\": {\n            \"type\": \"all\",\n            \"sort\": \"updated\"\n        },\n        \"headers\": {\n            \"Accept\": \"application/vnd.github.v3+json\",\n            \"Authorization\": \"token ghp_xxxxx\"\n        },\n        \"refresh_interval\": 1800,  # Refresh every 30 minutes\n        \"logic\": \"\"\"\ndef process_data(widget_data, request, user):\n    stars = widget_data.get('stargazers_count', 0)\n    forks = widget_data.get('forks_count', 0)\n    return {\n        'stars': stars,\n        'forks': forks,\n        'popularity': 'high' if stars &gt; 1000 else 'moderate'\n    }\n        \"\"\"\n    }\n)\n\nawait widget.save()\n</code></pre>"},{"location":"sdk/widgets/#interaction-parameters","title":"Interaction Parameters","text":"Parameter Type Description <code>endpoint</code> <code>str</code> API endpoint URL <code>params</code> <code>Dict[str, Any]</code> Query parameters <code>headers</code> <code>Dict[str, str]</code> HTTP headers <code>refresh_interval</code> <code>int</code> Auto-refresh interval in seconds (0 = no refresh) <code>logic</code> <code>str</code> Python code to process response data"},{"location":"sdk/widgets/#reading-widgets","title":"Reading Widgets","text":""},{"location":"sdk/widgets/#list-all-widgets-in-project","title":"List All Widgets in Project","text":"<pre><code>from lazi_sdk import ReadWidget\n\n# Initialize reader\nreader = ReadWidget(\n    username=\"developer@example.com\",\n    token=\"read_access_token\",\n    project_id=\"project_123\"\n)\n\n# List all widgets\nwidgets = await reader.list_widgets()\n\nfor widget in widgets:\n    print(f\"Widget: {widget['name']} (ID: {widget['widget_id']})\")\n</code></pre>"},{"location":"sdk/widgets/#get-specific-widget","title":"Get Specific Widget","text":"<pre><code># Get widget by ID\nwidget_data = await reader.get_widget(\"widget_abc123\")\n\nprint(f\"Widget Name: {widget_data['name']}\")\nprint(f\"Description: {widget_data['description']}\")\nprint(f\"Size: {widget_data['size']}\")\nprint(f\"Content URLs: {widget_data['content']}\")\n</code></pre>"},{"location":"sdk/widgets/#advanced-widget-creation","title":"Advanced Widget Creation","text":""},{"location":"sdk/widgets/#using-custom-decorator","title":"Using Custom Decorator","text":"<pre><code>from lazi_sdk import WriteWidget\n\nwidget = WriteWidget(token=token, user_id=user_id)\n\n# Use decorator pattern for custom creation logic\n@widget.create\ndef build_custom_widget():\n    return {\n        \"name\": \"Custom Analytics\",\n        \"description\": \"Advanced metrics dashboard\",\n        \"size\": \"large\",\n        \"content\": [],\n        \"interaction\": {\n            \"params\": {\"metric\": \"revenue\"},\n            \"headers\": {\"Authorization\": \"Bearer token\"},\n            \"refresh_interval\": 300\n        }\n    }\n\n# Execute decorator\nresult = build_custom_widget()\n\n# Save\nawait widget.save()\n</code></pre>"},{"location":"sdk/widgets/#widget-updates","title":"Widget Updates","text":""},{"location":"sdk/widgets/#modify-existing-widget","title":"Modify Existing Widget","text":"<pre><code># Get widget\nreader = ReadWidget(username=username, token=token, project_id=project_id)\nwidget_data = await reader.get_widget(\"widget_123\")\n\n# Initialize writer with existing widget\nwriter = WriteWidget(token=token, user_id=user_id)\nwriter.current_widget = WidgetConfig(**widget_data)\nwriter.project_id = project_id\n\n# Update properties\nwriter.current_widget.name = \"Updated Dashboard\"\nwriter.current_widget.description = \"New description\"\n\n# Save changes\nawait writer.save()\n</code></pre>"},{"location":"sdk/widgets/#complete-example","title":"Complete Example","text":""},{"location":"sdk/widgets/#building-a-weather-widget","title":"Building a Weather Widget","text":"<pre><code>from lazi_sdk import WriteWidget\nimport os\n\nasync def create_weather_widget():\n    # Initialize\n    widget = WriteWidget(\n        token=os.getenv(\"LAZI_TOKEN\"),\n        user_id=os.getenv(\"LAZI_USER_ID\")\n    )\n\n    # Create widget\n    await widget.create_new(\n        name=\"Weather Dashboard\",\n        description=\"Current weather conditions\",\n        size=\"medium\",\n        project_id=\"weather_project_001\"\n    )\n\n    # Configure weather API endpoint\n    await widget.post(\n        endpoint=\"https://api.openweathermap.org/data/2.5/weather\",\n        endpoint_data={\n            \"params\": {\n                \"q\": \"San Francisco\",\n                \"appid\": os.getenv(\"WEATHER_API_KEY\"),\n                \"units\": \"metric\"\n            },\n            \"headers\": {\n                \"Content-Type\": \"application/json\"\n            },\n            \"refresh_interval\": 600,  # Refresh every 10 minutes\n            \"logic\": \"\"\"\ndef process_data(widget_data, request, user):\n    temp = widget_data['main']['temp']\n    feels_like = widget_data['main']['feels_like']\n    humidity = widget_data['main']['humidity']\n    description = widget_data['weather'][0]['description']\n\n    return {\n        'temperature': f\"{temp}\u00b0C\",\n        'feels_like': f\"{feels_like}\u00b0C\",\n        'humidity': f\"{humidity}%\",\n        'conditions': description.title(),\n        'last_updated': widget_data['dt']\n    }\n            \"\"\"\n        }\n    )\n\n    # Attach weather icon\n    await widget.attach_media(\n        object_name=\"weather_icon.png\",\n        filename=\"./assets/weather_icon.png\"\n    )\n\n    # Save\n    await widget.save()\n\n    print(f\"\u2705 Weather widget created: {widget.current_widget.id}\")\n    return widget.current_widget.id\n\n# Run\nimport asyncio\nasyncio.run(create_weather_widget())\n</code></pre>"},{"location":"sdk/widgets/#error-handling","title":"Error Handling","text":"<pre><code>from fastapi import HTTPException\n\nasync def safe_widget_creation():\n    try:\n        widget = WriteWidget(token=token, user_id=user_id)\n\n        await widget.create_new(\n            name=\"Safe Widget\",\n            description=\"With error handling\",\n            project_id=\"project_001\"\n        )\n\n        await widget.save()\n\n    except HTTPException as e:\n        if e.status_code == 403:\n            print(\"Permission denied: Check your scopes\")\n        elif e.status_code == 404:\n            print(\"Project not found\")\n        else:\n            print(f\"Error: {e.detail}\")\n    except Exception as e:\n        print(f\"Unexpected error: {str(e)}\")\n</code></pre>"},{"location":"sdk/widgets/#next-steps","title":"Next Steps","text":"<ul> <li>Examples - More complete widget examples</li> <li>Custom Endpoints - Create custom API endpoints for widgets</li> <li>API Reference - Detailed API documentation</li> </ul>"}]}